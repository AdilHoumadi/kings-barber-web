import{c as M,u as $,j as e,d as ke,X as z,G as De,P as J,r as f,C as ze,a as C,b as rt}from"./index-DhQ8_t9o.js";import{L as nt}from"./LanguageSwitcher-BRZbs7qx.js";import{C as V}from"./calendar-Ex1Ed9-g.js";import{t as Ne,b as Ue,c as lt,m as Re,d as Ke,g as ue,h as X,i as G,j as it,r as se,f as D,C as ee,a as Ze,D as Ve,L as dt}from"./style-CTUT5Xju.js";import{C as E}from"./clock-D-Um5Wrf.js";import{M as te,C as Me,T as Se}from"./trash-2-DLBXFc1M.js";import{C as $e}from"./circle-check-big-DW2pQxl_.js";import{U as oe}from"./user-BfSWJZF1.js";import{M as Be}from"./mail-C1tGBsJm.js";import{M as ot}from"./map-pin-ILosD3Wk.js";import{S as ct,H as mt,D as xt,W as ht}from"./wand-DKl3BPU1.js";const ut=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],gt=M("calendar-check",ut);const ft=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pt=M("circle-x",ft);const bt=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],yt=M("dollar-sign",bt);const Nt=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],je=M("eye",Nt);const jt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wt=M("funnel",jt);const vt=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],kt=M("grip-vertical",vt);const Dt=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],qe=M("layout-grid",Dt);const Ct=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ce=M("list",Ct);const Tt=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Mt=M("log-out",Tt);const St=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ie=M("pen",St);const $t=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xe=M("plus",$t);const It=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_t=M("refresh-cw",It);const At=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Pt=M("rotate-ccw",At);const Yt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ge=M("save",Yt);const Ft=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lt=M("search",Ft);const Ht=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ot=M("settings",Ht);const Wt=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Te=M("smartphone",Wt);function we(t){return+Ne(t)<Date.now()}function Et(t,s,a){return Ue(t,-1,a)}function R(t,s){const a=()=>lt(s?.in,NaN),n=Kt(t);let l;if(n.date){const x=Zt(n.date,2);l=Vt(x.restDateString,x.year)}if(!l||isNaN(+l))return a();const c=+l;let m=0,y;if(n.time&&(m=Bt(n.time),isNaN(m)))return a();if(n.timezone){if(y=qt(n.timezone),isNaN(y))return a()}else{const x=new Date(c+m),o=Ne(0,s?.in);return o.setFullYear(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()),o.setHours(x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds(),x.getUTCMilliseconds()),o}return Ne(c+m+y,s?.in)}const de={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ut=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Rt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Kt(t){const s={},a=t.split(de.dateTimeDelimiter);let r;if(a.length>2)return s;if(/:/.test(a[0])?r=a[0]:(s.date=a[0],r=a[1],de.timeZoneDelimiter.test(s.date)&&(s.date=t.split(de.timeZoneDelimiter)[0],r=t.substr(s.date.length,t.length))),r){const n=de.timezone.exec(r);n?(s.time=r.replace(n[1],""),s.timezone=n[1]):s.time=r}return s}function Zt(t,s){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),r=t.match(a);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:l===null?n:l*100,restDateString:t.slice((r[1]||r[2]).length)}}function Vt(t,s){if(s===null)return new Date(NaN);const a=t.match(zt);if(!a)return new Date(NaN);const r=!!a[4],n=Q(a[1]),l=Q(a[2])-1,c=Q(a[3]),m=Q(a[4]),y=Q(a[5])-1;if(r)return es(s,m,y)?Xt(s,m,y):new Date(NaN);{const x=new Date(0);return!Qt(s,l,c)||!Jt(s,n)?new Date(NaN):(x.setUTCFullYear(s,l,Math.max(n,c)),x)}}function Q(t){return t?parseInt(t):1}function Bt(t){const s=t.match(Ut);if(!s)return NaN;const a=ge(s[1]),r=ge(s[2]),n=ge(s[3]);return ts(a,r,n)?a*Re+r*Ke+n*1e3:NaN}function ge(t){return t&&parseFloat(t.replace(",","."))||0}function qt(t){if(t==="Z")return 0;const s=t.match(Rt);if(!s)return 0;const a=s[1]==="+"?-1:1,r=parseInt(s[2]),n=s[3]&&parseInt(s[3])||0;return ss(r,n)?a*(r*Re+n*Ke):NaN}function Xt(t,s,a){const r=new Date(0);r.setUTCFullYear(t,0,4);const n=r.getUTCDay()||7,l=(s-1)*7+a+1-n;return r.setUTCDate(r.getUTCDate()+l),r}const Gt=[31,null,31,30,31,30,31,31,30,31,30,31];function Qe(t){return t%400===0||t%4===0&&t%100!==0}function Qt(t,s,a){return s>=0&&s<=11&&a>=1&&a<=(Gt[s]||(Qe(t)?29:28))}function Jt(t,s){return s>=1&&s<=(Qe(t)?366:365)}function es(t,s,a){return s>=1&&s<=53&&a>=0&&a<=6}function ts(t,s,a){return t===24?s===0&&a===0:a>=0&&a<60&&s>=0&&s<60&&t>=0&&t<25}function ss(t,s){return s>=0&&s<=59}const as={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},rs=(t,s,a)=>{const r=as[t];let n;return typeof r=="string"?n=r:s===1?n=r.one:s===2?n=r.two:s<=10?n=r.threeToTen.replace("{{count}}",String(s)):n=r.other.replace("{{count}}",String(s)),a?.addSuffix?a.comparison&&a.comparison>0?"خلال "+n:"منذ "+n:n},ns={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},ls={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},is={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ds={date:ue({formats:ns,defaultWidth:"full"}),time:ue({formats:ls,defaultWidth:"full"}),dateTime:ue({formats:is,defaultWidth:"full"})},os={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},cs=t=>os[t],ms={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},xs={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},hs={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},us={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},gs={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},fs={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},ps=t=>String(t),bs={ordinalNumber:ps,era:X({values:ms,defaultWidth:"wide"}),quarter:X({values:xs,defaultWidth:"wide",argumentCallback:t=>t-1}),month:X({values:hs,defaultWidth:"wide"}),day:X({values:us,defaultWidth:"wide"}),dayPeriod:X({values:gs,defaultWidth:"wide",formattingValues:fs,defaultFormattingWidth:"wide"})},ys=/^(\d+)(th|st|nd|rd)?/i,Ns=/\d+/i,js={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},ws={any:[/قبل/,/بعد/]},vs={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},ks={any:[/1/i,/2/i,/3/i,/4/i]},Ds={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},Cs={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},Ts={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},Ms={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},Ss={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},$s={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},Is={ordinalNumber:it({matchPattern:ys,parsePattern:Ns,valueCallback:t=>parseInt(t,10)}),era:G({matchPatterns:js,defaultMatchWidth:"wide",parsePatterns:ws,defaultParseWidth:"any"}),quarter:G({matchPatterns:vs,defaultMatchWidth:"wide",parsePatterns:ks,defaultParseWidth:"any",valueCallback:t=>t+1}),month:G({matchPatterns:Ds,defaultMatchWidth:"wide",parsePatterns:Cs,defaultParseWidth:"any"}),day:G({matchPatterns:Ts,defaultMatchWidth:"wide",parsePatterns:Ms,defaultParseWidth:"any"}),dayPeriod:G({matchPatterns:Ss,defaultMatchWidth:"any",parsePatterns:$s,defaultParseWidth:"any"})},ae={code:"ar",formatDistance:rs,formatLong:ds,formatRelative:cs,localize:bs,match:Is,options:{weekStartsOn:6,firstWeekContainsDate:1}},_s=({children:t,sidebar:s,header:a})=>{const{i18n:r}=$(),n=r.dir();return e.jsxs("div",{className:"h-screen bg-dark-900 flex flex-col overflow-hidden",dir:n,children:[e.jsx("div",{className:"flex-none z-20 bg-dark-800 border-b border-white/10 shadow-md",children:a}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("main",{className:"flex-1 overflow-y-auto bg-dark-900 relative scrollbar-thin scrollbar-thumb-dark-700 scrollbar-track-transparent",children:e.jsx("div",{className:"min-h-full p-4 lg:p-6",children:t})}),e.jsx("aside",{className:"w-80 flex-none bg-dark-800 border-l border-white/10 hidden lg:flex flex-col h-full z-10 shadow-[-4px_0_15px_-3px_rgba(0,0,0,0.3)]",children:s})]})]})},As=({activeView:t,setActiveView:s,searchQuery:a,setSearchQuery:r,statusFilter:n,setStatusFilter:l,dateFilter:c,setDateFilter:m,onRefresh:y,onLogout:x,onNewAppointment:o,stats:h})=>{const{t:p}=$("admin");return e.jsxs("div",{className:"flex flex-col bg-dark-800 border-b border-white/10",children:[h.pending>0&&e.jsxs("div",{className:"bg-yellow-500/10 border-b border-yellow-500/20 px-3 md:px-6 py-2 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 md:w-8 md:h-8 bg-yellow-500 rounded-full animate-pulse flex-shrink-0",children:e.jsx("span",{className:"text-dark-900 font-bold text-xs md:text-sm",children:h.pending})}),e.jsx("span",{className:"text-yellow-400 font-medium text-xs md:text-sm",children:h.pending===1?p("notifications.pendingOne"):p("notifications.pendingMultiple",{count:h.pending})})]}),e.jsx("button",{onClick:()=>{l("pending"),m(""),s("appointments")},className:"text-xs font-bold text-yellow-400 hover:text-yellow-300 bg-yellow-500/20 hover:bg-yellow-500/30 px-2 md:px-3 py-1 md:py-1.5 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:p("notifications.viewPending")})]}),e.jsxs("div",{className:"flex items-center justify-between px-3 md:px-6 py-2 md:py-3 border-b border-white/5",children:[e.jsx("h1",{className:"text-base md:text-xl font-bold text-white tracking-tight",children:p("title")}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-3",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(nt,{})}),e.jsxs("button",{onClick:o,className:"inline-flex items-center justify-center gap-1 md:gap-2 px-2.5 md:px-4 py-2 md:py-2 bg-gold-500 hover:bg-gold-400 text-dark-900 rounded-lg text-xs md:text-sm font-bold transition-all",children:[e.jsx(Xe,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"hidden md:inline",children:p("actions.add")})]}),e.jsx("button",{onClick:y,className:"inline-flex items-center justify-center w-9 h-9 md:w-10 md:h-10 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",title:p("actions.refresh"),children:e.jsx(_t,{className:"h-4 w-4 flex-shrink-0"})}),e.jsx("button",{onClick:x,className:"inline-flex items-center justify-center w-9 h-9 md:w-10 md:h-10 hover:bg-red-500/10 rounded-lg transition-colors text-red-500/70 hover:text-red-500",title:p("actions.logout"),children:e.jsx(Mt,{className:"h-4 w-4 flex-shrink-0"})})]})]}),e.jsx("div",{className:"overflow-x-auto scrollbar-hide border-b border-white/5",children:e.jsxs("div",{className:"inline-flex bg-dark-900/30 p-1 min-w-full",children:[e.jsxs("button",{onClick:()=>s("today"),className:`inline-flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-6 py-2 md:py-2.5 rounded-md text-xs md:text-sm font-bold uppercase tracking-wider transition-all relative whitespace-nowrap ${t==="today"?"bg-gold-500 text-dark-900":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(gt,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:p("views.today")}),h.pending>0&&t!=="today"&&e.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center min-w-4 h-4 bg-yellow-500 text-dark-900 text-[10px] font-bold rounded-full px-1 animate-pulse",children:h.pending})]}),e.jsxs("button",{onClick:()=>s("appointments"),className:`inline-flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-6 py-2 md:py-2.5 rounded-md text-xs md:text-sm font-bold uppercase tracking-wider transition-all whitespace-nowrap ${t==="appointments"?"bg-gold-500 text-dark-900":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ce,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:p("views.all")})]}),e.jsxs("button",{onClick:()=>s("availability"),className:`inline-flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-6 py-2 md:py-2.5 rounded-md text-xs md:text-sm font-bold uppercase tracking-wider transition-all whitespace-nowrap ${t==="availability"?"bg-gold-500 text-dark-900":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ot,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:p("views.availability")})]}),e.jsxs("button",{onClick:()=>s("services"),className:`inline-flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-6 py-2 md:py-2.5 rounded-md text-xs md:text-sm font-bold uppercase tracking-wider transition-all whitespace-nowrap ${t==="services"?"bg-gold-500 text-dark-900":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(ke,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:p("views.services")})]})]})}),t==="appointments"&&e.jsx("div",{className:"px-3 md:px-6 py-2 md:py-3 bg-dark-900/30",children:e.jsxs("div",{className:"grid grid-cols-1 md:flex md:items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"relative flex-1 md:max-w-[220px]",children:[e.jsx(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"}),e.jsx("input",{type:"text",placeholder:p("filters.search"),value:a,onChange:w=>r(w.target.value),className:"w-full bg-dark-900 border border-white/10 rounded-lg pl-9 pr-3 py-2 text-sm text-white placeholder-gray-600 focus:border-gold-500/50 focus:ring-1 focus:ring-gold-500/50 outline-none transition-colors h-10 md:h-9 rtl:pl-3 rtl:pr-9"})]}),e.jsxs("div",{className:"relative md:w-36",children:[e.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500 rtl:left-auto rtl:right-3"}),e.jsxs("select",{value:n,onChange:w=>l(w.target.value),className:"w-full bg-dark-900 border border-white/10 rounded-lg pl-9 pr-2 py-2 text-sm text-white focus:border-gold-500/50 outline-none cursor-pointer h-10 md:h-9 appearance-none rtl:pl-2 rtl:pr-9",children:[e.jsx("option",{value:"all",children:p("filters.allStatuses")}),e.jsx("option",{value:"pending",children:p("filters.pending")}),e.jsx("option",{value:"confirmed",children:p("filters.confirmed")}),e.jsx("option",{value:"cancelled",children:p("filters.cancelled")})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none rtl:right-auto rtl:left-3",children:e.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"relative md:w-36",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500 rtl:left-auto rtl:right-3"}),e.jsx("input",{type:"date",value:c,onChange:w=>m(w.target.value),className:"w-full bg-dark-900 border border-white/10 rounded-lg pl-9 pr-2 py-2 text-sm text-white focus:border-gold-500/50 outline-none cursor-pointer h-10 md:h-9 rtl:pl-2 rtl:pr-9"})]}),(c||n!=="all")&&e.jsxs("button",{onClick:()=>{m(""),l("all")},className:"w-full md:w-auto px-4 py-2 bg-dark-800 hover:bg-dark-700 border border-white/10 rounded-lg text-sm font-bold text-gray-400 hover:text-white transition-colors h-10 md:h-9 flex items-center justify-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-x",children:[e.jsx("path",{d:"M18 6 6 18"}),e.jsx("path",{d:"m6 6 12 12"})]}),p("actions.reset")]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-4 px-4 border-l border-white/10 rtl:border-l-0 rtl:border-r ml-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wider font-bold",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-gray-400",children:[p("stats.pending"),":"]}),e.jsx("span",{className:"text-white",children:h.pending})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wider font-bold",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-gray-400",children:[p("stats.confirmed"),":"]}),e.jsx("span",{className:"text-white",children:h.confirmed})]})]})]})})]})},Je=({appointment:t,serviceNames:s,onStatusUpdate:a,onViewDetails:r,variant:n="grid"})=>{const{t:l,i18n:c}=$("admin"),m=c.language==="ar"?ae:se,y=u=>{switch(u){case"phone":return e.jsx(J,{className:"h-3.5 w-3.5 text-blue-400"});case"whatsapp":return e.jsx(te,{className:"h-3.5 w-3.5 text-green-400"});case"walk-in":return e.jsx(Te,{className:"h-3.5 w-3.5 text-purple-400"});default:return e.jsx(De,{className:"h-3.5 w-3.5 text-gray-400"})}},x=u=>{switch(u){case"phone":return l("source.phone");case"whatsapp":return l("source.whatsapp");case"walk-in":return l("source.walkIn");default:return l("source.web")}},o=u=>{switch(u){case"confirmed":return"bg-green-500/10 text-green-400 border-green-500/30";case"cancelled":return"bg-red-500/10 text-red-400 border-red-500/30";default:return"bg-yellow-500/10 text-yellow-500 border-yellow-500/30"}},h=u=>l(`status.${u}`),p=t.status==="pending",w=t.status==="cancelled",k=R(`${t.appointmentDate}T${t.appointmentTime}`),g=we(k);return n==="list"?e.jsxs("div",{className:`group flex items-center gap-4 p-4 bg-dark-800 border rounded-lg transition-all hover:border-gold-500/50 ${w?"opacity-60 grayscale":g&&!w?"opacity-75":""} ${p?"border-yellow-500/30 shadow-[0_0_10px_-5px_rgba(234,179,8,0.2)]":"border-white/10"}`,children:[e.jsxs("div",{className:"flex flex-col min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-lg font-bold text-white font-mono",children:t.appointmentTime}),t.totalDuration&&e.jsxs("span",{className:"text-xs text-gray-500 bg-dark-700 px-1.5 py-0.5 rounded",children:[t.totalDuration," min"]}),p&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:D(R(t.appointmentDate),"dd MMM",{locale:m})})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-0.5",children:t.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:t.phone})]}),e.jsx("div",{className:"flex-1 min-w-0 text-left rtl:text-right hidden md:block",children:e.jsx("div",{className:"text-xs text-gray-400 line-clamp-1",children:s})}),e.jsx("div",{className:"text-right min-w-[80px] rtl:text-left",children:e.jsxs("div",{className:"text-sm font-bold text-gold-500",children:[t.totalPrice," RON"]})}),e.jsx("div",{className:"min-w-[90px] hidden sm:block",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${o(t.status)}`,children:h(t.status)})}),e.jsx("div",{className:"min-w-[40px] hidden lg:block",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-dark-900/50 rounded-md border border-white/10",title:x(t.source),children:y(t.source)})}),e.jsxs("div",{className:"flex gap-1 min-w-[100px] justify-end rtl:justify-start",children:[e.jsx("button",{onClick:()=>r(t),className:"p-1.5 hover:bg-dark-700 rounded-md text-gray-400 hover:text-white transition-colors",title:l("actions.view"),children:e.jsx(je,{className:"h-4 w-4"})}),p&&!g&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(t.id,"confirmed"),className:"p-1.5 hover:bg-green-500/20 rounded-md text-green-400 hover:text-green-300 transition-colors",title:l("actions.confirm"),children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>a(t.id,"cancelled"),className:"p-1.5 hover:bg-red-500/20 rounded-md text-red-400 hover:text-red-300 transition-colors",title:l("actions.cancel"),children:e.jsx(z,{className:"h-4 w-4"})})]})]})]}):e.jsxs("div",{className:`group relative bg-dark-800 border rounded-xl p-4 transition-all hover:border-gold-500/50 hover:shadow-lg hover:shadow-gold-500/10 ${w?"opacity-60 grayscale":g&&!w?"opacity-75":""} ${p?"border-yellow-500/30 shadow-[0_0_15px_-5px_rgba(234,179,8,0.2)]":"border-white/10"}`,children:[p&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-gold-500 to-transparent"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:"text-xl font-bold text-white font-mono",children:t.appointmentTime}),t.totalDuration&&e.jsxs("span",{className:"text-xs text-gray-500 bg-dark-700 px-1.5 py-0.5 rounded",children:[t.totalDuration," min"]}),p&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:D(R(t.appointmentDate),"EEEE, dd MMMM yyyy",{locale:m})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-0.5 truncate",children:t.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:t.phone})]}),e.jsx("div",{className:"text-xs text-gray-400 line-clamp-2",children:s})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between min-w-[120px] rtl:items-start",children:[e.jsx("div",{className:"text-right mb-2 rtl:text-left",children:e.jsxs("div",{className:"text-lg font-bold text-gold-500",children:[t.totalPrice," RON"]})}),e.jsxs("div",{className:"flex flex-col gap-2 items-end mb-2 rtl:items-start",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${o(t.status)}`,children:h(t.status)}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-dark-900/50 rounded-md border border-white/10",children:[y(t.source),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-medium",children:x(t.source)})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>r(t),className:"p-1.5 hover:bg-dark-700 rounded-md text-gray-400 hover:text-white transition-colors",title:l("actions.view"),children:e.jsx(je,{className:"h-4 w-4"})}),p&&!g&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(t.id,"confirmed"),className:"p-1.5 hover:bg-green-500/20 rounded-md text-green-400 hover:text-green-300 transition-colors",title:l("actions.confirm"),children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>a(t.id,"cancelled"),className:"p-1.5 hover:bg-red-500/20 rounded-md text-red-400 hover:text-red-300 transition-colors",title:l("actions.cancel"),children:e.jsx(z,{className:"h-4 w-4"})})]})]})]})]}),g&&!w&&e.jsx("div",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2",children:e.jsx("span",{className:"text-[9px] uppercase tracking-wider font-bold text-gray-600 bg-dark-900/80 px-1.5 py-0.5 rounded",children:l("status.past")})})]})},Ps=({appointments:t,services:s,loading:a,currentPage:r,totalPages:n,totalItems:l,onPageChange:c,onStatusUpdate:m,onViewDetails:y})=>{const{t:x}=$("admin"),{t:o}=$("common"),[h,p]=f.useState("grid"),w=u=>{if(u.nameKey){const b=o(`services_data.${u.nameKey}.name`,{defaultValue:""});if(b&&b!==`services_data.${u.nameKey}.name`)return b}return u.name},k=u=>u.map(b=>{const N=s.find(I=>I.id===b);return N?w(N):null}).filter(Boolean).join(", "),g=()=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-dark-800/50 rounded-lg border border-white/5",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:[x("pagination.page")," ",e.jsx("span",{className:"font-bold text-white",children:r})," ",x("pagination.of")," ",e.jsx("span",{className:"font-bold text-white",children:n}),e.jsxs("span",{className:"hidden sm:inline ml-2 rtl:ml-0 rtl:mr-2",children:["• ",e.jsx("span",{className:"font-medium text-white",children:l})," ",x("pagination.appointments")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>c(r-1),disabled:r===1,className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-dark-700 hover:bg-dark-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-gray-400 hover:text-white text-xs font-medium",children:[e.jsx(Ze,{className:"h-3.5 w-3.5 rtl:rotate-180"}),e.jsx("span",{className:"hidden sm:inline",children:x("actions.previous")})]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,n)},(u,b)=>{let N=b+1;return n>5&&r>3&&(N=r-2+b),N>n?null:e.jsx("button",{onClick:()=>c(N),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${r===N?"bg-gold-500 text-dark-900 shadow-lg shadow-gold-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600 hover:text-white"}`,children:N},N)})}),e.jsxs("button",{onClick:()=>c(r+1),disabled:r===n,className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-dark-700 hover:bg-dark-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-gray-400 hover:text-white text-xs font-medium",children:[e.jsx("span",{className:"hidden sm:inline",children:x("actions.next")}),e.jsx(ze,{className:"h-3.5 w-3.5 rtl:rotate-180"})]})]})]});return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3 sm:gap-4 justify-between items-stretch sm:items-center",children:[e.jsxs("div",{className:"flex bg-dark-800 p-1 rounded-lg border border-white/10 self-start",children:[e.jsxs("button",{onClick:()=>p("grid"),className:`flex items-center gap-1.5 px-2.5 md:px-4 py-1.5 md:py-2 rounded-md transition-all text-xs md:text-sm font-medium ${h==="grid"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:x("views.grid")})]}),e.jsxs("button",{onClick:()=>p("list"),className:`flex items-center gap-1.5 px-2.5 md:px-4 py-1.5 md:py-2 rounded-md transition-all text-xs md:text-sm font-medium ${h==="list"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:x("views.list")})]})]}),e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:g()})]}),e.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin scrollbar-thumb-dark-600",children:a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gold-500"})}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:x("messages.noAppointments")}),e.jsx("div",{className:"text-gray-600 text-xs",children:x("messages.tryAdjust")})]})}):e.jsx("div",{className:h==="grid"?"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 pb-4":"flex flex-col gap-3 pb-4",children:t.map(u=>e.jsx(Je,{appointment:u,serviceNames:k(u.services),onStatusUpdate:m,onViewDetails:y,variant:h},u.id))})}),!a&&t.length>0&&e.jsx("div",{className:"mt-4",children:g()})]})},Ys=({appointments:t,services:s,loading:a,selectedDate:r,onDateChange:n,onStatusUpdate:l,onViewDetails:c})=>{const{t:m,i18n:y}=$("admin"),{t:x}=$("common"),o=y.language==="ar"?ae:se,[h,p]=f.useState("list"),w=d=>{if(d.nameKey){const v=x(`services_data.${d.nameKey}.name`,{defaultValue:""});if(v&&v!==`services_data.${d.nameKey}.name`)return v}return d.name},k=d=>d.map(v=>{const P=s.find(Y=>Y.id===v);return P?w(P):null}).filter(Boolean).join(", "),g=d=>{switch(d){case"phone":return e.jsx(J,{className:"h-3 w-3 text-blue-400"});case"whatsapp":return e.jsx(te,{className:"h-3 w-3 text-green-400"});case"walk-in":return e.jsx(Te,{className:"h-3 w-3 text-purple-400"});default:return e.jsx(De,{className:"h-3 w-3 text-gray-400"})}},u=d=>{switch(d){case"confirmed":return"bg-green-500/10 text-green-400 border-green-500/30";case"cancelled":return"bg-red-500/10 text-red-400 border-red-500/30";default:return"bg-yellow-500/10 text-yellow-500 border-yellow-500/30"}},b=d=>m(`status.${d}`),N=[...t].sort((d,v)=>d.appointmentTime.localeCompare(v.appointmentTime)),I=N.filter(d=>d.status==="pending"),T=N.filter(d=>d.status==="confirmed"),A=N.filter(d=>d.status==="cancelled"),S={total:t.length,pending:I.length,confirmed:T.length,cancelled:A.length,totalRevenue:t.filter(d=>d.status!=="cancelled").reduce((d,v)=>d+v.totalPrice,0)},O=({appointment:d})=>{const v=d.status==="pending",P=d.status==="cancelled",Y=R(`${d.appointmentDate}T${d.appointmentTime}`),L=we(Y);return e.jsxs("div",{onClick:()=>c(d),className:`p-3 bg-dark-800 border rounded-lg transition-all cursor-pointer active:scale-[0.98] ${P?"opacity-60":L&&!P?"opacity-75":""} ${v?"border-yellow-500/30":"border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-sm font-bold text-white font-mono",children:d.appointmentTime}),v&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsxs("span",{className:"text-sm font-bold text-gold-500",children:[d.totalPrice," RON"]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-sm font-medium text-white truncate",children:d.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:d.phone})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g(d.source),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:k(d.services)})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase border ${u(d.status)}`,children:b(d.status)}),v&&!L&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),l(d.id,"confirmed")},className:"p-1.5 bg-green-500/20 rounded text-green-400 active:bg-green-500/30",children:e.jsx(ee,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),l(d.id,"cancelled")},className:"p-1.5 bg-red-500/20 rounded text-red-400 active:bg-red-500/30",children:e.jsx(z,{className:"h-3.5 w-3.5"})})]})]})]})]})},i=({appointment:d})=>{const v=d.status==="pending",P=d.status==="cancelled",Y=R(`${d.appointmentDate}T${d.appointmentTime}`),L=we(Y);return e.jsxs("div",{className:`group flex items-center gap-4 p-4 bg-dark-800 border rounded-lg transition-all hover:border-gold-500/50 ${P?"opacity-60 grayscale":L&&!P?"opacity-75":""} ${v?"border-yellow-500/30 shadow-[0_0_10px_-5px_rgba(234,179,8,0.2)]":"border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[e.jsx(E,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-lg font-bold text-white font-mono",children:d.appointmentTime}),v&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-0.5",children:d.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:d.phone})]}),e.jsx("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:e.jsx("div",{className:"text-xs text-gray-400 line-clamp-1",children:k(d.services)})}),e.jsx("div",{className:"text-right min-w-[80px] rtl:text-left",children:e.jsxs("div",{className:"text-sm font-bold text-gold-500",children:[d.totalPrice," RON"]})}),e.jsx("div",{className:"min-w-[90px] flex justify-center",children:e.jsx("span",{className:`inline-flex items-center justify-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${u(d.status)}`,children:b(d.status)})}),e.jsx("div",{className:"min-w-[40px] flex justify-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1.5 px-2 py-1 bg-dark-900/50 rounded-md border border-white/10",title:d.source,children:g(d.source)})}),e.jsxs("div",{className:"flex gap-1 min-w-[100px] justify-end rtl:justify-start",children:[e.jsx("button",{onClick:()=>c(d),className:"p-1.5 hover:bg-dark-700 rounded-md text-gray-400 hover:text-white transition-colors",title:m("actions.view"),children:e.jsx(je,{className:"h-4 w-4"})}),v&&!L&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(d.id,"confirmed"),className:"p-1.5 hover:bg-green-500/20 rounded-md text-green-400 hover:text-green-300 transition-colors",title:m("actions.confirm"),children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>l(d.id,"cancelled"),className:"p-1.5 hover:bg-red-500/20 rounded-md text-red-400 hover:text-red-300 transition-colors",title:m("actions.cancel"),children:e.jsx(z,{className:"h-4 w-4"})})]})]})]})};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-3 md:mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-gold-500"}),e.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white",children:m("todayView.title")})]}),e.jsxs("div",{className:"flex bg-dark-800 p-1 rounded-lg border border-white/10",children:[e.jsxs("button",{onClick:()=>p("grid"),className:`p-1.5 md:px-3 md:py-1.5 rounded-md transition-all flex items-center gap-1.5 ${h==="grid"?"bg-gold-500 text-dark-900":"text-gray-400 hover:text-white"}`,children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline text-xs font-medium",children:m("views.grid")})]}),e.jsxs("button",{onClick:()=>p("list"),className:`p-1.5 md:px-3 md:py-1.5 rounded-md transition-all flex items-center gap-1.5 ${h==="list"?"bg-gold-500 text-dark-900":"text-gray-400 hover:text-white"}`,children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline text-xs font-medium",children:m("views.list")})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("button",{onClick:()=>n(D(Et(R(r)),"yyyy-MM-dd")),className:"p-2 bg-dark-800 border border-white/10 rounded-lg text-gray-400 active:bg-dark-700",children:e.jsx(Ze,{className:"h-4 w-4 rtl:rotate-180"})}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 bg-dark-800 border border-white/10 rounded-lg px-3 py-2",children:[e.jsx("input",{type:"date",value:r,onChange:d=>n(d.target.value),className:"bg-transparent border-none text-white font-medium text-sm focus:outline-none cursor-pointer"}),e.jsx("span",{className:"text-xs text-gray-400 hidden md:inline",children:D(R(r),"EEEE",{locale:o})})]}),r!==D(new Date,"yyyy-MM-dd")?e.jsx("button",{onClick:()=>n(D(new Date,"yyyy-MM-dd")),className:"px-3 py-2 bg-gold-500 text-dark-900 rounded-lg text-xs font-bold",children:m("actions.today")}):e.jsx("button",{onClick:()=>n(D(Ue(R(r),1),"yyyy-MM-dd")),className:"p-2 bg-dark-800 border border-white/10 rounded-lg text-gray-400 active:bg-dark-700",children:e.jsx(ze,{className:"h-4 w-4 rtl:rotate-180"})})]})]}),e.jsx("div",{className:"overflow-x-auto scrollbar-hide -mx-3 px-3 md:mx-0 md:px-0",children:e.jsxs("div",{className:"flex md:grid md:grid-cols-5 gap-1.5 md:gap-3 min-w-max md:min-w-0",children:[e.jsxs("div",{className:"bg-dark-800 border border-white/10 rounded-lg p-2 md:p-3 min-w-[70px] md:min-w-0 flex flex-col items-center md:items-start text-center md:text-left",children:[e.jsx("div",{className:"text-[9px] md:text-xs text-gray-400 uppercase tracking-wider mb-0.5 md:mb-1",children:m("stats.total")}),e.jsx("div",{className:"text-lg md:text-2xl font-bold text-white leading-none md:leading-normal",children:S.total})]}),e.jsxs("div",{className:"bg-dark-800 border border-yellow-500/30 rounded-lg p-2 md:p-3 min-w-[70px] md:min-w-0 flex flex-col items-center md:items-start text-center md:text-left",children:[e.jsx("div",{className:"text-[9px] md:text-xs text-gray-400 uppercase tracking-wider mb-0.5 md:mb-1",children:m("stats.pending")}),e.jsx("div",{className:"text-lg md:text-2xl font-bold text-yellow-500 leading-none md:leading-normal",children:S.pending})]}),e.jsxs("div",{className:"bg-dark-800 border border-green-500/30 rounded-lg p-2 md:p-3 min-w-[70px] md:min-w-0 flex flex-col items-center md:items-start text-center md:text-left",children:[e.jsx("div",{className:"text-[9px] md:text-xs text-gray-400 uppercase tracking-wider mb-0.5 md:mb-1",children:m("stats.confirmed")}),e.jsx("div",{className:"text-lg md:text-2xl font-bold text-green-500 leading-none md:leading-normal",children:S.confirmed})]}),e.jsxs("div",{className:"bg-dark-800 border border-red-500/30 rounded-lg p-2 md:p-3 min-w-[70px] md:min-w-0 flex flex-col items-center md:items-start text-center md:text-left",children:[e.jsx("div",{className:"text-[9px] md:text-xs text-gray-400 uppercase tracking-wider mb-0.5 md:mb-1",children:m("stats.cancelled")}),e.jsx("div",{className:"text-lg md:text-2xl font-bold text-red-500 leading-none md:leading-normal",children:S.cancelled})]}),e.jsxs("div",{className:"bg-dark-800 border border-gold-500/30 rounded-lg p-2 md:p-3 min-w-[90px] md:min-w-0 flex flex-col items-center md:items-start text-center md:text-left",children:[e.jsx("div",{className:"text-[9px] md:text-xs text-gray-400 uppercase tracking-wider mb-0.5 md:mb-1",children:m("stats.estimatedRevenue")}),e.jsxs("div",{className:"text-lg md:text-2xl font-bold text-gold-500 leading-none md:leading-normal",children:[S.totalRevenue," ",e.jsx("span",{className:"text-xs md:text-lg",children:"RON"})]})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin scrollbar-thumb-dark-600",children:a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gold-500"})}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:m("todayView.noAppointments")}),e.jsx("div",{className:"text-gray-600 text-xs",children:m("todayView.freeDay")})]})}):h==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 md:gap-4 pb-4",children:N.map(d=>e.jsx(Je,{appointment:d,serviceNames:k(d.services),onStatusUpdate:l,onViewDetails:c,variant:"grid"},d.id))}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[I.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 md:mb-3",children:[e.jsx("div",{className:"h-px flex-1 bg-yellow-500/20"}),e.jsxs("h3",{className:"text-xs uppercase tracking-wider font-bold text-yellow-500",children:[m("todayView.inProgress")," (",I.length,")"]}),e.jsx("div",{className:"h-px flex-1 bg-yellow-500/20"})]}),e.jsxs("div",{className:"space-y-2",children:[I.map(d=>e.jsx("div",{className:"hidden md:block",children:e.jsx(i,{appointment:d})},d.id)),I.map(d=>e.jsx("div",{className:"md:hidden",children:e.jsx(O,{appointment:d})},d.id))]})]}),T.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 md:mb-3",children:[e.jsx("div",{className:"h-px flex-1 bg-green-500/20"}),e.jsxs("h3",{className:"text-xs uppercase tracking-wider font-bold text-green-500",children:[m("todayView.confirmedSection")," (",T.length,")"]}),e.jsx("div",{className:"h-px flex-1 bg-green-500/20"})]}),e.jsxs("div",{className:"space-y-2",children:[T.map(d=>e.jsx("div",{className:"hidden md:block",children:e.jsx(i,{appointment:d})},d.id)),T.map(d=>e.jsx("div",{className:"md:hidden",children:e.jsx(O,{appointment:d})},d.id))]})]}),A.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 md:mb-3",children:[e.jsx("div",{className:"h-px flex-1 bg-red-500/20"}),e.jsxs("h3",{className:"text-xs uppercase tracking-wider font-bold text-red-500",children:[m("todayView.cancelledSection")," (",A.length,")"]}),e.jsx("div",{className:"h-px flex-1 bg-red-500/20"})]}),e.jsxs("div",{className:"space-y-2",children:[A.map(d=>e.jsx("div",{className:"hidden md:block",children:e.jsx(i,{appointment:d})},d.id)),A.map(d=>e.jsx("div",{className:"md:hidden",children:e.jsx(O,{appointment:d})},d.id))]})]})]})})]})},Fs=({tasks:t,services:s,selectedDate:a,onDateChange:r,onUpdateStatus:n,onViewDetails:l})=>{const{t:c}=$("admin"),{t:m}=$("common"),y=o=>{if(o.nameKey){const h=m(`services_data.${o.nameKey}.name`,{defaultValue:""});if(h&&h!==`services_data.${o.nameKey}.name`)return h}return o.name},x=o=>o.map(h=>{const p=s.find(w=>w.id===h);return p?y(p):null}).filter(Boolean).join(", ");return e.jsxs("div",{className:"h-full flex flex-col bg-dark-800 border-l border-white/10 rtl:border-l-0 rtl:border-r",children:[e.jsxs("div",{className:"p-3 border-b border-white/10",children:[e.jsx("h3",{className:"text-sm font-bold text-white mb-2",children:c("sidebar.title")}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500 rtl:left-auto rtl:right-2"}),e.jsx("input",{type:"date",value:a,onChange:o=>r(o.target.value),className:"w-full bg-dark-900 border border-white/10 rounded pl-8 pr-2 py-1.5 text-xs text-white focus:border-gold-500/50 focus:ring-1 focus:ring-gold-500/50 outline-none cursor-pointer hover:border-white/20 transition-colors rtl:pl-2 rtl:pr-8"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 scrollbar-thin scrollbar-thumb-dark-600",children:t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 text-[10px]",children:c("sidebar.noTasks")}):t.map(o=>e.jsxs("div",{className:`bg-dark-900 border rounded-md p-2 transition-all hover:border-gold-500/30 group ${o.status==="pending"?"border-yellow-500/30 shadow-[0_0_10px_-5px_rgba(234,179,8,0.2)]":o.status==="confirmed"?"border-green-500/20":"border-white/5 opacity-60"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"bg-dark-800 px-1 py-0.5 rounded text-[10px] font-bold text-white font-mono border border-white/10",children:o.appointmentTime}),o.status==="pending"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsxs("span",{className:"text-gold-500 text-[10px] font-bold",children:[o.totalPrice," RON"]})]}),e.jsxs("div",{className:"mb-1.5",children:[e.jsx("div",{className:"font-bold text-white text-xs truncate",children:o.fullName}),e.jsx("div",{className:"text-[10px] text-gray-500 truncate",children:x(o.services)})]}),e.jsxs("div",{className:"flex gap-1.5 mt-1.5 pt-1.5 border-t border-white/5",children:[e.jsx("button",{onClick:()=>l(o),className:"flex-1 py-0.5 bg-dark-800 hover:bg-dark-700 text-gray-400 hover:text-white text-[10px] font-medium rounded transition-colors",children:c("sidebar.details")}),o.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n(o.id,"confirmed"),className:"flex-1 py-0.5 bg-green-500/10 hover:bg-green-500/20 text-green-400 text-[10px] font-medium rounded transition-colors",children:c("actions.confirm")}),e.jsx("button",{onClick:()=>n(o.id,"cancelled"),className:"p-0.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded transition-colors",title:c("actions.cancel"),children:e.jsx(z,{className:"h-3 w-3"})})]})]})]},o.id))})]})};function Ls(t,s){const a=zs(s);return"formatToParts"in a?Os(a,t):Ws(a,t)}const Hs={year:0,month:1,day:2,hour:3,minute:4,second:5};function Os(t,s){try{const a=t.formatToParts(s),r=[];for(let n=0;n<a.length;n++){const l=Hs[a[n].type];l!==void 0&&(r[l]=parseInt(a[n].value,10))}return r}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function Ws(t,s){const a=t.format(s),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const fe={},_e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Es=_e==="06/25/2014, 00:00:00"||_e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function zs(t){return fe[t]||(fe[t]=Es?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),fe[t]}function et(t,s,a,r,n,l,c){const m=new Date(0);return m.setUTCFullYear(t,s,a),m.setUTCHours(r,n,l,c),m}const Ae=36e5,Us=6e4,pe={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function tt(t,s,a){if(!t)return 0;let r=pe.timezoneZ.exec(t);if(r)return 0;let n,l;if(r=pe.timezoneHH.exec(t),r)return n=parseInt(r[1],10),Pe(n)?-(n*Ae):NaN;if(r=pe.timezoneHHMM.exec(t),r){n=parseInt(r[2],10);const c=parseInt(r[3],10);return Pe(n,c)?(l=Math.abs(n)*Ae+c*Us,r[1]==="+"?-l:l):NaN}if(Zs(t)){s=new Date(s||Date.now());const c=a?s:Rs(s),m=ve(c,t);return-(a?m:Ks(s,m,t))}return NaN}function Rs(t){return et(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function ve(t,s){const a=Ls(t,s),r=et(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime();let n=t.getTime();const l=n%1e3;return n-=l>=0?l:1e3+l,r-n}function Ks(t,s,a){let n=t.getTime()-s;const l=ve(new Date(n),a);if(s===l)return s;n-=l-s;const c=ve(new Date(n),a);return l===c?l:Math.max(l,c)}function Pe(t,s){return-23<=t&&t<=23&&(s==null||0<=s&&s<=59)}const Ye={};function Zs(t){if(Ye[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),Ye[t]=!0,!0}catch{return!1}}function Fe(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+t-+s}const Vs=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,be=36e5,Le=6e4,Bs=2,_={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Vs};function qs(t,s={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const a=s.additionalDigits==null?Bs:Number(s.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const r=Xs(t),{year:n,restDateString:l}=Gs(r.date,a),c=Qs(l,n);if(c===null||isNaN(c.getTime()))return new Date(NaN);if(c){const m=c.getTime();let y=0,x;if(r.time&&(y=Js(r.time),y===null||isNaN(y)))return new Date(NaN);if(r.timeZone||s.timeZone){if(x=tt(r.timeZone||s.timeZone,new Date(m+y)),isNaN(x))return new Date(NaN)}else x=Fe(new Date(m+y)),x=Fe(new Date(m+y+x));return new Date(m+y+x)}else return new Date(NaN)}function Xs(t){const s={};let a=_.dateTimePattern.exec(t),r;if(a?(s.date=a[1],r=a[3]):(a=_.datePattern.exec(t),a?(s.date=a[1],r=a[2]):(s.date=null,r=t)),r){const n=_.timeZone.exec(r);n?(s.time=r.replace(n[1],""),s.timeZone=n[1].trim()):s.time=r}return s}function Gs(t,s){if(t){const a=_.YYY[s],r=_.YYYYY[s];let n=_.YYYY.exec(t)||r.exec(t);if(n){const l=n[1];return{year:parseInt(l,10),restDateString:t.slice(l.length)}}if(n=_.YY.exec(t)||a.exec(t),n){const l=n[1];return{year:parseInt(l,10)*100,restDateString:t.slice(l.length)}}}return{year:null}}function Qs(t,s){if(s===null)return null;let a,r,n;if(!t||!t.length)return a=new Date(0),a.setUTCFullYear(s),a;let l=_.MM.exec(t);if(l)return a=new Date(0),r=parseInt(l[1],10)-1,Oe(s,r)?(a.setUTCFullYear(s,r),a):new Date(NaN);if(l=_.DDD.exec(t),l){a=new Date(0);const c=parseInt(l[1],10);return sa(s,c)?(a.setUTCFullYear(s,0,c),a):new Date(NaN)}if(l=_.MMDD.exec(t),l){a=new Date(0),r=parseInt(l[1],10)-1;const c=parseInt(l[2],10);return Oe(s,r,c)?(a.setUTCFullYear(s,r,c),a):new Date(NaN)}if(l=_.Www.exec(t),l)return n=parseInt(l[1],10)-1,We(n)?He(s,n):new Date(NaN);if(l=_.WwwD.exec(t),l){n=parseInt(l[1],10)-1;const c=parseInt(l[2],10)-1;return We(n,c)?He(s,n,c):new Date(NaN)}return null}function Js(t){let s,a,r=_.HH.exec(t);if(r)return s=parseFloat(r[1].replace(",",".")),ye(s)?s%24*be:NaN;if(r=_.HHMM.exec(t),r)return s=parseInt(r[1],10),a=parseFloat(r[2].replace(",",".")),ye(s,a)?s%24*be+a*Le:NaN;if(r=_.HHMMSS.exec(t),r){s=parseInt(r[1],10),a=parseInt(r[2],10);const n=parseFloat(r[3].replace(",","."));return ye(s,a,n)?s%24*be+a*Le+n*1e3:NaN}return null}function He(t,s,a){s=s||0,a=a||0;const r=new Date(0);r.setUTCFullYear(t,0,4);const n=r.getUTCDay()||7,l=s*7+a+1-n;return r.setUTCDate(r.getUTCDate()+l),r}const ea=[31,28,31,30,31,30,31,31,30,31,30,31],ta=[31,29,31,30,31,30,31,31,30,31,30,31];function st(t){return t%400===0||t%4===0&&t%100!==0}function Oe(t,s,a){if(s<0||s>11)return!1;if(a!=null){if(a<1)return!1;const r=st(t);if(r&&a>ta[s]||!r&&a>ea[s])return!1}return!0}function sa(t,s){if(s<1)return!1;const a=st(t);return!(a&&s>366||!a&&s>365)}function We(t,s){return!(t<0||t>52||s!=null&&(s<0||s>6))}function ye(t,s,a){return!(t<0||t>=25||s!=null&&(s<0||s>=60)||a!=null&&(a<0||a>=60))}function aa(t,s,a){t=qs(t,a);const r=tt(s,t,!0),n=new Date(t.getTime()-r),l=new Date(0);return l.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),l.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),l}const ra=()=>{const{t,i18n:s}=$("admin"),a=s.language==="ar"?ae:se,[r,n]=f.useState(new Date),[l,c]=f.useState({startTime:"10:00",endTime:"20:00",slotDuration:60,isClosed:!1}),[m,y]=f.useState(!1),[x,o]=f.useState(null),[h,p]=f.useState({openTime:"10:00",closeTime:"20:00",slotDuration:60,defaultClosedDays:[0]});f.useEffect(()=>{(async()=>{try{const b=await C.get("/config");p({openTime:b.data.openTime,closeTime:b.data.closeTime,slotDuration:b.data.slotDuration,defaultClosedDays:b.data.defaultClosedDays||[0]}),c(N=>({...N,startTime:b.data.openTime,endTime:b.data.closeTime,slotDuration:b.data.slotDuration}))}catch(b){console.error("Failed to fetch salon config:",b)}})()},[]),f.useEffect(()=>{r&&w()},[r]);const w=async()=>{try{const u=D(r,"yyyy-MM-dd"),b=await C.get(`/availability/${u}`);c(b.data)}catch(u){console.error("Failed to fetch availability:",u)}},k=async()=>{y(!0),o(null);try{const u=D(r,"yyyy-MM-dd");await C.post("/availability",{date:u,...l}),o({type:"success",text:t("availability.saveSuccess")}),setTimeout(()=>o(null),3e3)}catch{o({type:"error",text:t("availability.saveError")})}finally{y(!1)}},g=async()=>{if(confirm(t("availability.resetConfirm"))){y(!0);try{const u=D(r,"yyyy-MM-dd");await C.delete(`/availability/${u}`);const b=h.timeZone||"Europe/Bucharest",I=aa(r,b).getDay(),T=h.defaultClosedDays.includes(I);c({startTime:h.openTime,endTime:h.closeTime,slotDuration:h.slotDuration,isClosed:T}),o({type:"success",text:t("availability.resetSuccess")}),setTimeout(()=>o(null),3e3)}catch{o({type:"error",text:t("availability.resetError")})}finally{y(!1)}}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-1",children:t("availability.title")}),e.jsx("p",{className:"text-gray-400 text-sm",children:t("availability.subtitle")})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-dark-700 rounded-xl md:rounded-2xl p-4 md:p-8 border border-white/10 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-gold-500/10 p-2 md:p-3 rounded-lg md:rounded-xl",children:e.jsx(V,{className:"h-5 w-5 md:h-6 md:w-6 text-gold-500"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-white",children:t("availability.selectDate")})]}),e.jsx("div",{className:"bg-dark-900/50 p-2 md:p-6 rounded-lg md:rounded-xl border border-white/5",children:e.jsx("div",{className:"flex justify-center overflow-x-auto scrollbar-hide",children:e.jsx(Ve,{mode:"single",selected:r,onSelect:u=>u&&n(u),locale:a,modifiersClassNames:{selected:"bg-gold-500 text-dark-900 font-bold hover:bg-gold-400",today:"text-gold-500 font-bold"},className:"text-white rdp-custom",dir:s.language==="ar"?"rtl":"ltr",styles:{caption:{padding:"0.5rem"},caption_label:{fontSize:"0.9rem",fontWeight:"bold"},head_cell:{fontSize:"0.7rem",color:"#9ca3af",width:"2.5rem"},cell:{width:"2.5rem",height:"2.5rem"},day:{width:"2.2rem",height:"2.2rem",borderRadius:"0.5rem"},nav_button:{width:"1.75rem",height:"1.75rem"}}})})}),e.jsxs("div",{className:"mt-4 md:mt-6 p-3 md:p-4 bg-dark-900/80 rounded-lg md:rounded-xl border border-white/10 flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-400 text-sm",children:[t("availability.selectedDate"),":"]}),e.jsx("span",{className:"text-gold-500 font-bold text-sm md:text-lg",children:D(r,"dd MMMM yyyy",{locale:a})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-dark-700 rounded-xl md:rounded-2xl p-4 md:p-8 border border-white/10 shadow-xl flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-gold-500/10 p-2 md:p-3 rounded-lg md:rounded-xl",children:e.jsx(E,{className:"h-5 w-5 md:h-6 md:w-6 text-gold-500"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-white",children:t("availability.configTitle")})]}),e.jsxs("div",{className:"space-y-6 flex-1",children:[e.jsxs("div",{className:`flex items-center justify-between p-5 rounded-xl border transition-all duration-300 ${l.isClosed?"bg-red-500/10 border-red-500/30":"bg-dark-900/50 border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l.isClosed?e.jsx(pt,{className:"h-6 w-6 text-red-500"}):e.jsx($e,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("span",{className:`font-bold block ${l.isClosed?"text-red-400":"text-white"}`,children:l.isClosed?t("availability.closed"):t("availability.open")}),e.jsx("span",{className:"text-xs text-gray-400",children:l.isClosed?t("availability.closedDesc"):t("availability.openDesc")})]})]}),e.jsx("button",{onClick:()=>c({...l,isClosed:!l.isClosed}),className:`relative w-14 h-7 rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-dark-900 ${l.isClosed?"bg-red-500 focus:ring-red-500":"bg-green-500 focus:ring-green-500"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 ${l.isClosed?"transform translate-x-7":""} rtl:right-1 rtl:left-auto rtl:translate-x-[-1.75rem]`})})]}),!l.isClosed&&e.jsxs("div",{className:"space-y-5 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:t("availability.startTime")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:l.startTime,onChange:u=>c({...l,startTime:u.target.value}),className:"w-full h-12 bg-dark-900 border border-white/10 rounded-xl px-3 pl-10 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all rtl:pl-3 rtl:pr-10"}),e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:t("availability.endTime")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:l.endTime,onChange:u=>c({...l,endTime:u.target.value}),className:"w-full h-12 bg-dark-900 border border-white/10 rounded-xl px-3 pl-10 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all rtl:pl-3 rtl:pr-10"}),e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:t("availability.slotDuration")}),e.jsxs("select",{value:l.slotDuration,onChange:u=>c({...l,slotDuration:Number(u.target.value)}),className:"w-full h-12 bg-dark-900 border border-white/10 rounded-xl px-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all appearance-none cursor-pointer",children:[e.jsxs("option",{value:15,children:["15 ",t("availability.minutes")]}),e.jsxs("option",{value:30,children:["30 ",t("availability.minutes")]}),e.jsxs("option",{value:45,children:["45 ",t("availability.minutes")]}),e.jsxs("option",{value:60,children:["60 ",t("availability.minutes")]})]})]})]}),x&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-3 animate-fade-in ${x.type==="success"?"bg-green-500/10 border border-green-500/20 text-green-400":"bg-red-500/10 border border-red-500/20 text-red-400"}`,children:[x.type==="success"?e.jsx($e,{className:"h-5 w-5"}):e.jsx(Me,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:x.text})]}),e.jsxs("div",{className:"flex gap-3 pt-4 mt-auto",children:[e.jsxs("button",{onClick:k,disabled:m,className:"flex-1 flex items-center justify-center gap-2 bg-gold-500 text-dark-900 py-3.5 rounded-xl font-bold hover:bg-gold-400 transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100 shadow-lg shadow-gold-500/20",children:[m?e.jsx("span",{className:"animate-spin",children:"⌛"}):e.jsx(Ge,{className:"h-5 w-5"}),t(m?"availability.saving":"availability.saveChanges")]}),e.jsx("button",{onClick:g,disabled:m,className:"px-5 flex items-center justify-center gap-2 bg-dark-800 text-gray-400 border border-white/10 py-3.5 rounded-xl font-medium hover:bg-dark-700 hover:text-white transition-all disabled:opacity-50",title:t("availability.reset"),children:e.jsx(Pt,{className:"h-5 w-5"})})]})]})]})]}),e.jsxs("div",{className:"bg-blue-500/5 border border-blue-500/10 rounded-xl md:rounded-2xl p-4 md:p-6 flex gap-3 md:gap-4 items-start",children:[e.jsx("div",{className:"bg-blue-500/10 p-1.5 md:p-2 rounded-lg shrink-0",children:e.jsx(Me,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-400 font-bold mb-1 md:mb-2 text-base md:text-lg",children:t("availability.infoTitle")}),e.jsxs("ul",{className:"text-blue-300/80 space-y-1 md:space-y-2 text-xs md:text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 md:mt-1.5 w-1 h-1 md:w-1.5 md:h-1.5 rounded-full bg-blue-500/50"}),t("availability.info1")]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 md:mt-1.5 w-1 h-1 md:w-1.5 md:h-1.5 rounded-full bg-blue-500/50"}),t("availability.info2")]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 md:mt-1.5 w-1 h-1 md:w-1.5 md:h-1.5 rounded-full bg-blue-500/50"}),t("availability.info3")]})]})]})]})]})},na=({isOpen:t,onClose:s,onSuccess:a,services:r})=>{const{t:n,i18n:l}=$("admin"),c=l.language==="ar"?ae:se,[m,y]=f.useState(!1),[x,o]=f.useState([]),[h,p]=f.useState(new Date),[w,k]=f.useState(""),[g,u]=f.useState([]),[b,N]=f.useState({fullName:"",phone:"0791125555",email:"",message:"",source:"phone",status:"confirmed"}),[I,T]=f.useState({maxBookingDays:7});f.useEffect(()=>{(async()=>{try{const d=await C.get("/config");T(d.data)}catch(d){console.error("Failed to fetch salon config:",d)}})()},[]),f.useEffect(()=>{t&&(N({fullName:"",phone:"0791125555",email:"",message:"",source:"phone",status:"confirmed"}),o([]),p(new Date),k(""))},[t]),f.useEffect(()=>{if(!h){u([]);return}(async()=>{try{const d=D(h,"yyyy-MM-dd"),v=await C.get(`/availability/${d}`),{startTime:P,endTime:Y,slotDuration:L,isClosed:H,bookedSlots:B}=v.data;if(H){u([]);return}const re=[],[ce,ne]=P.split(":").map(Number),[me,K]=Y.split(":").map(Number);let W=ce*60+ne;const Z=me*60+K,F=new Date,le=D(h,"yyyy-MM-dd")===D(F,"yyyy-MM-dd"),q=F.getHours()*60+F.getMinutes();for(;W<Z;){if(le&&W<q){W+=L;continue}const xe=Math.floor(W/60),he=W%60,ie=`${String(xe).padStart(2,"0")}:${String(he).padStart(2,"0")}`;(!B||!B.includes(ie))&&re.push(ie),W+=L}u(re)}catch(d){console.error("Failed to fetch availability",d),u([])}})()},[h]);const A=i=>{o(d=>d.includes(i)?d.filter(v=>v!==i):[...d,i])},S=()=>r.filter(i=>x.includes(i.id)).reduce((i,d)=>i+d.price,0),O=async i=>{if(i.preventDefault(),!h||!w||x.length===0){alert(n("modal.fillRequired"));return}y(!0);try{await C.post("/appointments",{...b,appointmentDate:D(h,"yyyy-MM-dd"),appointmentTime:w,services:x,totalPrice:S()}),a(),s()}catch(d){console.error("Booking failed",d),alert(n("modal.createError"))}finally{y(!1)}};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-800 p-6 border-b border-white/10 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:n("modal.createTitle")}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsx("form",{onSubmit:O,className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"})," ",n("modal.clientDetails")]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:[n("modal.fullName")," *"]}),e.jsx("input",{type:"text",required:!0,value:b.fullName,onChange:i=>N({...b,fullName:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",placeholder:n("modal.fullName")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"})," ",n("modal.phone")]}),e.jsx("input",{type:"tel",value:b.phone,onChange:i=>N({...b,phone:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right rtl:direction-ltr",placeholder:"0791125555"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx(Be,{className:"h-3 w-3"})," ",n("modal.email")]}),e.jsx("input",{type:"email",value:b.email,onChange:i=>N({...b,email:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",placeholder:n("modal.optional")})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"})," ",n("modal.bookingDetails")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:[n("modal.source")," *"]}),e.jsxs("select",{value:b.source,onChange:i=>N({...b,source:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",children:[e.jsx("option",{value:"phone",children:"Telefon"}),e.jsx("option",{value:"walk_in",children:"Walk-in"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"other",children:"Altul"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:[n("modal.status")," *"]}),e.jsxs("select",{value:b.status,onChange:i=>N({...b,status:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",children:[e.jsx("option",{value:"confirmed",children:n("filters.confirmed")}),e.jsx("option",{value:"pending",children:n("filters.pending")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:n("modal.message")}),e.jsx("textarea",{value:b.message,onChange:i=>N({...b,message:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none h-20 resize-none rtl:text-right",placeholder:n("modal.internalNotes")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"})," ",n("modal.services")," *"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto pr-2",children:r.map(i=>e.jsxs("div",{onClick:()=>A(i.id),className:`p-3 rounded-lg border cursor-pointer transition-all flex justify-between items-center ${x.includes(i.id)?"bg-gold-500/10 border-gold-500":"bg-dark-900 border-white/10 hover:border-gold-500/50"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${x.includes(i.id)?"text-gold-500":"text-white"}`,children:i.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[i.duration," min"]})]}),e.jsxs("p",{className:"font-bold text-white",children:[i.price," RON"]})]},i.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"})," ",n("modal.dateAndTime")," *"]}),e.jsx("div",{className:"bg-dark-900 p-4 rounded-xl border border-white/10 flex justify-center",children:e.jsx(Ve,{mode:"single",selected:h,onSelect:p,locale:c,disabled:[{before:new Date},{after:new Date(new Date().setDate(new Date().getDate()+I.maxBookingDays))}],modifiersClassNames:{selected:"bg-gold-500 text-dark-900 font-bold hover:bg-gold-400",today:"text-gold-500 font-bold"},className:"text-white",dir:l.language==="ar"?"rtl":"ltr"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-gold-500"})," ",n("modal.availableHours")]}),h?g.length===0?e.jsx("p",{className:"text-red-400 text-sm",children:n("modal.noSlots")}):e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-60 overflow-y-auto pr-2",children:g.map(i=>e.jsx("button",{type:"button",onClick:()=>k(i),className:`p-2 rounded text-sm font-medium transition-colors ${w===i?"bg-gold-500 text-dark-900":"bg-dark-900 text-gray-300 hover:bg-dark-700 border border-white/10"}`,children:i},i))}):e.jsx("p",{className:"text-gray-400 text-sm",children:n("modal.selectDateFirst")})]}),e.jsxs("div",{className:"bg-dark-900 p-4 rounded-xl border border-white/10 mt-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-gray-400",children:[n("modal.total"),":"]}),e.jsxs("span",{className:"text-2xl font-bold text-gold-500",children:[S()," RON"]})]}),e.jsx("button",{type:"submit",disabled:m||!h||!w||x.length===0,className:"w-full bg-gold-500 text-dark-900 py-3 rounded-lg font-bold hover:bg-gold-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsx(dt,{className:"h-5 w-5 animate-spin"}):n("modal.createButton")})]})]})]})})]})}):null},la=({appointment:t,services:s,onClose:a,onUpdateStatus:r})=>{const{t:n,i18n:l}=$("admin"),{t:c}=$("common"),m=l.language==="ar"?ae:se;if(!t)return null;const y=g=>{if(g.nameKey){const u=c(`services_data.${g.nameKey}.name`,{defaultValue:""});if(u&&u!==`services_data.${g.nameKey}.name`)return u}return g.name},x=g=>g.map(u=>{const b=s.find(N=>N.id===u);return b?y(b):null}).filter(Boolean).join(", "),o=(g="web")=>{switch(g){case"web":return e.jsx(De,{className:"h-4 w-4 text-blue-400"});case"phone":return e.jsx(J,{className:"h-4 w-4 text-green-400"});case"whatsapp":return e.jsx(te,{className:"h-4 w-4 text-green-500"});case"walk_in":return e.jsx(ot,{className:"h-4 w-4 text-orange-400"});case"instagram":return e.jsx(Te,{className:"h-4 w-4 text-pink-500"});default:return e.jsx(oe,{className:"h-4 w-4 text-gray-400"})}},h=(g="web")=>{switch(g){case"web":return"Website";case"phone":return"Telefon";case"whatsapp":return"WhatsApp";case"walk_in":return"Walk-in";case"instagram":return"Instagram";case"facebook":return"Facebook";default:return g}},p=g=>{switch(g){case"confirmed":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},w=`✅ Programare confirmată!

Bună ${t.fullName},

Programarea ta la Kings Barber este confirmată pentru ${D(new Date(t.appointmentDate),"dd/MM/yyyy")} la ${t.appointmentTime}.

Ne vedem curând!

Cu stimă ✂️
Kings Barber`,k=`❌ Programare refuzată!

Bună ${t.fullName},

Din păcate, programarea ta la Kings Barber, programată pentru ${D(new Date(t.appointmentDate),"dd/MM/yyyy")} la ${t.appointmentTime}, nu poate fi confirmată și a fost refuzată.

Te rugăm să alegi o altă dată sau oră care ți se potrivește.

Cu stimă ✂️
Kings Barber`;return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end rtl:justify-start",onClick:a,children:e.jsxs("div",{className:"bg-dark-800 w-full max-w-md h-full overflow-y-auto border-l border-white/10 rtl:border-l-0 rtl:border-r",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-white/10 p-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:n("drawer.title")}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(z,{className:"h-5 w-5 text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 block",children:n("drawer.status")}),e.jsx("div",{className:"flex gap-2",children:["pending","confirmed","cancelled"].map(g=>e.jsx("button",{onClick:()=>r(t.id,g),className:`flex-1 px-3 py-2 rounded text-xs font-medium border transition-colors ${t.status===g?p(g):"bg-dark-700 text-gray-400 border-white/10 hover:bg-dark-600"}`,children:n(g==="pending"?"filters.pending":g==="confirmed"?"filters.confirmed":"filters.cancelled")},g))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[e.jsx(V,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:n("drawer.date")})]}),e.jsx("p",{className:"text-sm font-medium text-white",children:D(new Date(t.appointmentDate),"dd MMM yyyy",{locale:m})})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[e.jsx(E,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:n("drawer.time")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:t.appointmentTime}),t.totalDuration&&e.jsxs("span",{className:"text-xs text-gray-400 bg-dark-600 px-2 py-0.5 rounded",children:[t.totalDuration," min"]})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 space-y-2",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:n("drawer.client")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-gold-500"}),e.jsx("span",{className:"text-sm text-white",children:t.fullName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-gold-500"}),e.jsx("a",{href:`tel:${t.phone}`,className:"text-sm text-blue-400 hover:underline dir-ltr",children:t.phone})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-gold-500"}),e.jsx("a",{href:`mailto:${t.email}`,className:"text-sm text-blue-400 hover:underline",children:t.email})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:n("drawer.services")}),e.jsx("p",{className:"text-sm text-white",children:x(t.services)})]}),e.jsx("div",{className:"bg-dark-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(yt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:n("drawer.total")})]}),e.jsxs("span",{className:"text-lg font-bold text-gold-500",children:[t.totalPrice," RON"]})]})}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"WhatsApp Actions"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("a",{href:`https://wa.me/${t.phone.replace(/\+/g,"")}?text=${encodeURIComponent(w)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-[#25D366] hover:bg-[#128C7E] text-white py-2 px-4 rounded transition-colors text-sm font-medium",onClick:()=>r(t.id,"confirmed"),children:[e.jsx(te,{className:"h-4 w-4"}),"Confirm via WhatsApp"]}),e.jsxs("a",{href:`https://wa.me/${t.phone.replace(/\+/g,"")}?text=${encodeURIComponent(k)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded transition-colors text-sm font-medium",onClick:()=>r(t.id,"cancelled"),children:[e.jsx(z,{className:"h-4 w-4"}),"Decline via WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:n("drawer.source")}),e.jsxs("div",{className:"flex items-center gap-2",children:[o(t.source),e.jsx("span",{className:"text-sm text-white",children:h(t.source)})]})]}),t.message&&e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:n("drawer.message")}),e.jsx("p",{className:"text-sm text-gray-300",children:t.message})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-white/10",children:[n("drawer.created"),": ",D(new Date(t.createdAt),"dd MMM yyyy, HH:mm",{locale:m})]})]})]})})},Ee=[{value:"scissors",label:"Scissors",Icon:ke},{value:"sparkles",label:"Sparkles",Icon:ct},{value:"hand",label:"Hand",Icon:mt},{value:"droplet",label:"Droplet",Icon:xt},{value:"user",label:"User",Icon:oe},{value:"wand",label:"Wand",Icon:ht}],ia=()=>{const{t}=$("admin"),{t:s}=$("common"),[a,r]=f.useState([]),[n,l]=f.useState(!0),[c,m]=f.useState(null),[y,x]=f.useState(!1),[o,h]=f.useState({name:"",nameKey:"",price:0,duration:30,description:"",descriptionKey:"",icon:"scissors",isActive:!0,sortOrder:0}),[p,w]=f.useState(null),k=async()=>{try{l(!0);const i=await C.get("/services/all");r(i.data)}catch(i){console.error("Failed to fetch services:",i)}finally{l(!1)}};f.useEffect(()=>{k()},[]);const g=(i,d)=>{w({type:i,text:d}),setTimeout(()=>w(null),3e3)},u=()=>{x(!0),m(null),h({name:"",nameKey:"",price:0,duration:30,description:"",descriptionKey:"",icon:"scissors",isActive:!0,sortOrder:a.length})},b=i=>{m(i),x(!1),h({name:i.name,nameKey:i.nameKey||"",price:i.price,duration:i.duration,description:i.description||"",descriptionKey:i.descriptionKey||"",icon:i.icon||"scissors",isActive:i.isActive!==!1,sortOrder:i.sortOrder||0})},N=()=>{m(null),x(!1),h({name:"",nameKey:"",price:0,duration:30,description:"",descriptionKey:"",icon:"scissors",isActive:!0,sortOrder:0})},I=async()=>{try{y?(await C.post("/services",o),g("success",t("services.saveSuccess"))):c&&(await C.put(`/services/${c.id}`,o),g("success",t("services.saveSuccess"))),k(),N()}catch(i){console.error("Failed to save service:",i),g("error",t("services.saveError"))}},T=async i=>{if(confirm(t("services.deleteConfirm")))try{await C.delete(`/services/${i}`),g("success",t("services.deleteSuccess")),k()}catch(d){console.error("Failed to delete service:",d),g("error",t("services.deleteError"))}},A=async i=>{try{await C.put(`/services/${i.id}`,{isActive:!i.isActive}),k()}catch(d){console.error("Failed to toggle active:",d)}},S=i=>{const d=Ee.find(v=>v.value===i);return d?d.Icon:ke},O=i=>{if(i.nameKey){const d=s(`services_data.${i.nameKey}.name`,{defaultValue:""});if(d&&d!==`services_data.${i.nameKey}.name`)return d}return i.name};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gold-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:t("services.title")}),e.jsx("p",{className:"text-gray-400 text-xs md:text-sm",children:t("services.subtitle")})]}),e.jsxs("button",{onClick:u,className:"inline-flex items-center justify-center gap-2 bg-gold-500 text-dark-900 px-3 md:px-4 py-2 rounded-lg text-sm font-medium hover:bg-gold-400 transition-colors",children:[e.jsx(Xe,{className:"h-4 w-4 md:h-5 md:w-5 flex-shrink-0"}),e.jsx("span",{children:t("services.addNew")})]})]}),p&&e.jsx("div",{className:`p-4 rounded-lg ${p.type==="success"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:p.text}),(y||c)&&e.jsxs("div",{className:"bg-dark-800 border border-white/10 rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:t(y?"services.addNew":"services.editService")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:[t("services.name")," *"]}),e.jsx("input",{type:"text",value:o.name,onChange:i=>h({...o,name:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:t("services.nameKey")}),e.jsx("input",{type:"text",value:o.nameKey||"",onChange:i=>h({...o,nameKey:i.target.value}),placeholder:"e.g. tuns, barba",className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:[t("services.price")," *"]}),e.jsx("input",{type:"number",value:o.price,onChange:i=>h({...o,price:parseInt(i.target.value)||0}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none",min:0,required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:[t("services.duration")," *"]}),e.jsx("input",{type:"number",value:o.duration,onChange:i=>h({...o,duration:parseInt(i.target.value)||0}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none",min:5,step:5,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:t("services.icon")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ee.map(i=>{const d=i.Icon;return e.jsx("button",{type:"button",onClick:()=>h({...o,icon:i.value}),className:`p-2 rounded-lg border transition-colors inline-flex items-center justify-center ${o.icon===i.value?"bg-gold-500 text-dark-900 border-gold-500":"bg-dark-700 text-gray-400 border-white/10 hover:border-gold-500/50"}`,title:t(`services.icons.${i.value}`),children:e.jsx(d,{className:"h-5 w-5 flex-shrink-0"})},i.value)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"block text-sm text-gray-400",children:t("services.isActive")}),e.jsx("button",{type:"button",onClick:()=>h({...o,isActive:!o.isActive}),className:`w-12 h-6 rounded-full transition-colors ${o.isActive?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transform transition-transform ${o.isActive?"translate-x-6":"translate-x-0.5"}`})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:t("services.description")}),e.jsx("textarea",{value:o.description||"",onChange:i=>h({...o,description:i.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none h-20 resize-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs("button",{onClick:I,disabled:!o.name||o.price===void 0||o.duration===void 0,className:"flex items-center gap-2 bg-gold-500 text-dark-900 px-4 py-2 rounded-lg font-medium hover:bg-gold-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ge,{className:"h-4 w-4"}),t("services.save")]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 bg-dark-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-dark-600 transition-colors",children:[e.jsx(z,{className:"h-4 w-4"}),t("services.cancel")]})]})]}),a.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:e.jsx("p",{children:t("services.noServices")})}):e.jsx("div",{className:"space-y-3",children:a.map(i=>{const d=S(i.icon),v=O(i);return e.jsxs("div",{className:`bg-dark-800 border rounded-xl p-3 md:p-4 ${i.isActive?"border-white/10":"border-red-500/30 opacity-60"}`,children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${i.isActive?"bg-gold-500 text-dark-900":"bg-dark-700 text-gray-400"}`,children:e.jsx(d,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm",children:v}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:e.jsxs("span",{children:[i.duration," min"]})})]})]}),e.jsxs("div",{className:"text-gold-500 font-bold text-sm",children:[i.price," RON"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>A(i),className:`px-2 py-1 text-xs rounded ${i.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:i.isActive?t("services.active"):t("services.inactive")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>b(i),className:"p-2 text-gray-400 active:text-white active:bg-dark-700 rounded-lg",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(i.id),className:"p-2 text-gray-400 active:text-red-400 active:bg-red-500/10 rounded-lg",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsx("div",{className:"text-gray-500 cursor-grab",children:e.jsx(kt,{className:"h-5 w-5"})}),e.jsx("div",{className:`p-2 rounded-lg ${i.isActive?"bg-gold-500 text-dark-900":"bg-dark-700 text-gray-400"}`,children:e.jsx(d,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium",children:v}),i.nameKey&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Key: ",i.nameKey]}),i.description&&e.jsx("p",{className:"text-sm text-gray-400 truncate max-w-md",children:i.description})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs("span",{children:[i.duration," min"]})]}),e.jsxs("div",{className:"text-gold-500 font-bold text-lg min-w-[80px] text-right",children:[i.price," RON"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>A(i),className:`px-2 py-1 text-xs rounded ${i.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:i.isActive?t("services.active"):t("services.inactive")}),e.jsx("button",{onClick:()=>b(i),className:"p-2 text-gray-400 hover:text-white hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(i.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})]},i.id)})})]})},ya=()=>{const{t}=$("admin"),s=rt(),[a,r]=f.useState([]),[n,l]=f.useState([]),[c,m]=f.useState([]),[y,x]=f.useState([]),[o,h]=f.useState(!0),[p,w]=f.useState(!1),[k,g]=f.useState(null),[u,b]=f.useState(!1),[N,I]=f.useState("today"),[T,A]=f.useState(""),[S,O]=f.useState("all"),[i,d]=f.useState(""),[v,P]=f.useState(D(new Date,"yyyy-MM-dd")),[Y,L]=f.useState(D(new Date,"yyyy-MM-dd")||"2025-12-06"),[H,B]=f.useState(1),[re,ce]=f.useState(1),[ne,me]=f.useState(0),K=f.useCallback(async()=>{try{console.log("Fetching appointments with params:",{currentPage:H,statusFilter:S,dateFilter:i}),h(!0);const j=new URLSearchParams({page:H.toString(),limit:"12",...S!=="all"&&{status:S},...i&&{date:i}}),U=await C.get(`/appointments?${j}`);console.log("Appointments response:",U.data),r(U.data.data||[]),ce(U.data.pagination?.totalPages||1),me(U.data.pagination?.totalItems||0)}catch(j){console.error("Failed to fetch appointments:",j),r([])}finally{h(!1)}},[H,S,i]),W=f.useCallback(async()=>{try{const j=await C.get("/services");m(j.data)}catch(j){console.error("Failed to fetch services:",j)}},[]),Z=f.useCallback(async()=>{try{console.log("Fetching tasks for date:",v);const j=await C.get(`/appointments/tasks?date=${v}`);console.log("Tasks response:",j.data),x(j.data.tasks||[])}catch(j){console.error("Failed to fetch tasks:",j),x([])}},[v]),F=f.useCallback(async()=>{try{console.log("Fetching today appointments for:",Y),w(!0);const j=await C.get(`/appointments?date=${Y}&limit=100`);console.log("Today appointments response:",j.data),l(j.data.data||[])}catch(j){console.error("Failed to fetch today appointments:",j),l([])}finally{w(!1)}},[Y]),le=f.useCallback(async()=>{try{await C.get("/auth/me"),K(),W(),F()}catch(j){console.error("Auth check failed",j)}},[K,W,F]);f.useEffect(()=>{le()},[le]),f.useEffect(()=>{Z()},[Z]),f.useEffect(()=>{F()},[F]);const q=async(j,U)=>{try{await C.put(`/appointments/${j}/status`,{status:U}),K(),Z(),F(),k&&k.id===j&&g({...k,status:U})}catch(at){console.error("Failed to update status:",at),alert(t("messages.updateError"))}},xe=async()=>{try{await C.post("/auth/logout"),s("/admin/login")}catch(j){console.error("Logout failed",j),s("/admin/login")}},he=a.filter(j=>T===""||j.fullName.toLowerCase().includes(T.toLowerCase())||j.phone.includes(T)),ie={total:ne,pending:a.filter(j=>j.status==="pending").length,confirmed:a.filter(j=>j.status==="confirmed").length};return e.jsxs(_s,{header:e.jsx(As,{activeView:N,setActiveView:I,searchQuery:T,setSearchQuery:A,statusFilter:S,setStatusFilter:j=>{O(j),B(1)},dateFilter:i,setDateFilter:j=>{d(j),B(1)},onRefresh:()=>{K(),Z(),F()},onLogout:xe,onNewAppointment:()=>b(!0),stats:ie}),sidebar:e.jsx(Fs,{tasks:y,services:c,selectedDate:v,onDateChange:P,onUpdateStatus:q,onViewDetails:g}),children:[N==="availability"?e.jsx(ra,{}):N==="services"?e.jsx(ia,{}):N==="today"?e.jsx(Ys,{appointments:n,services:c,loading:p,selectedDate:Y,onDateChange:L,onStatusUpdate:q,onViewDetails:g}):e.jsx(Ps,{appointments:he,services:c,loading:o,currentPage:H,totalPages:re,totalItems:ne,onPageChange:B,onStatusUpdate:q,onViewDetails:g}),u&&e.jsx(na,{isOpen:u,onClose:()=>b(!1),onSuccess:()=>{K(),Z(),F(),b(!1)},services:c}),k&&e.jsx(la,{appointment:k,services:c,onClose:()=>g(null),onUpdateStatus:q})]})};export{ya as default};
