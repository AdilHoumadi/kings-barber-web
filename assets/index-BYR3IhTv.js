import{c as C,u as S,j as e,d as je,X as W,G as ke,P as Q,r as g,C as Oe,a as D,b as st}from"./index-Cj2Hnojt.js";import{L as at}from"./LanguageSwitcher-BU7Y7YVW.js";import{C as R}from"./calendar-DakciNez.js";import{t as Ne,b as We,c as rt,m as Ee,d as Ue,g as he,h as B,i as X,j as nt,r as ee,f as k,C as oe,a as ze,D as Ke,L as lt}from"./style-Dk17lTo7.js";import{C as O}from"./clock-CYT42Pe8.js";import{M as J,C as Ce,T as it}from"./trash-2-BLPO0pKy.js";import{C as Me}from"./circle-check-big-nF7p_amL.js";import{U as de}from"./user-DLpC0f6w.js";import{M as Re}from"./mail-BF4sJssh.js";import{M as ot}from"./map-pin-BcoYPluu.js";import{S as dt,H as ct,D as xt,W as mt}from"./wand-Cj2iFcFv.js";const ut=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],ht=C("calendar-check",ut);const gt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ft=C("circle-x",gt);const pt=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],bt=C("dollar-sign",pt);const yt=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],we=C("eye",yt);const Nt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wt=C("funnel",Nt);const vt=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],jt=C("grip-vertical",vt);const kt=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Ze=C("layout-grid",kt);const Dt=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],De=C("list",Dt);const Tt=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ct=C("log-out",Tt);const Mt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],St=C("pen",Mt);const $t=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ve=C("plus",$t);const It=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_t=C("refresh-cw",It);const At=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Yt=C("rotate-ccw",At);const Pt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qe=C("save",Pt);const Ft=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ht=C("search",Ft);const Lt=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ot=C("settings",Lt);const Wt=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Te=C("smartphone",Wt);function Be(t){return+Ne(t)<Date.now()}function Et(t,s,r){return We(t,-1,r)}function K(t,s){const r=()=>rt(s?.in,NaN),l=Rt(t);let i;if(l.date){const x=Zt(l.date,2);i=Vt(x.restDateString,x.year)}if(!i||isNaN(+i))return r();const d=+i;let c=0,y;if(l.time&&(c=qt(l.time),isNaN(c)))return r();if(l.timezone){if(y=Bt(l.timezone),isNaN(y))return r()}else{const x=new Date(d+c),o=Ne(0,s?.in);return o.setFullYear(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()),o.setHours(x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds(),x.getUTCMilliseconds()),o}return Ne(d+c+y,s?.in)}const ie={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ut=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,zt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Kt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Rt(t){const s={},r=t.split(ie.dateTimeDelimiter);let n;if(r.length>2)return s;if(/:/.test(r[0])?n=r[0]:(s.date=r[0],n=r[1],ie.timeZoneDelimiter.test(s.date)&&(s.date=t.split(ie.timeZoneDelimiter)[0],n=t.substr(s.date.length,t.length))),n){const l=ie.timezone.exec(n);l?(s.time=n.replace(l[1],""),s.timezone=l[1]):s.time=n}return s}function Zt(t,s){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const l=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?l:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function Vt(t,s){if(s===null)return new Date(NaN);const r=t.match(Ut);if(!r)return new Date(NaN);const n=!!r[4],l=G(r[1]),i=G(r[2])-1,d=G(r[3]),c=G(r[4]),y=G(r[5])-1;if(n)return es(s,c,y)?Xt(s,c,y):new Date(NaN);{const x=new Date(0);return!Qt(s,i,d)||!Jt(s,l)?new Date(NaN):(x.setUTCFullYear(s,i,Math.max(l,d)),x)}}function G(t){return t?parseInt(t):1}function qt(t){const s=t.match(zt);if(!s)return NaN;const r=ge(s[1]),n=ge(s[2]),l=ge(s[3]);return ts(r,n,l)?r*Ee+n*Ue+l*1e3:NaN}function ge(t){return t&&parseFloat(t.replace(",","."))||0}function Bt(t){if(t==="Z")return 0;const s=t.match(Kt);if(!s)return 0;const r=s[1]==="+"?-1:1,n=parseInt(s[2]),l=s[3]&&parseInt(s[3])||0;return ss(n,l)?r*(n*Ee+l*Ue):NaN}function Xt(t,s,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const l=n.getUTCDay()||7,i=(s-1)*7+r+1-l;return n.setUTCDate(n.getUTCDate()+i),n}const Gt=[31,null,31,30,31,30,31,31,30,31,30,31];function Xe(t){return t%400===0||t%4===0&&t%100!==0}function Qt(t,s,r){return s>=0&&s<=11&&r>=1&&r<=(Gt[s]||(Xe(t)?29:28))}function Jt(t,s){return s>=1&&s<=(Xe(t)?366:365)}function es(t,s,r){return s>=1&&s<=53&&r>=0&&r<=6}function ts(t,s,r){return t===24?s===0&&r===0:r>=0&&r<60&&s>=0&&s<60&&t>=0&&t<25}function ss(t,s){return s>=0&&s<=59}const as={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},rs=(t,s,r)=>{const n=as[t];let l;return typeof n=="string"?l=n:s===1?l=n.one:s===2?l=n.two:s<=10?l=n.threeToTen.replace("{{count}}",String(s)):l=n.other.replace("{{count}}",String(s)),r?.addSuffix?r.comparison&&r.comparison>0?"خلال "+l:"منذ "+l:l},ns={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},ls={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},is={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},os={date:he({formats:ns,defaultWidth:"full"}),time:he({formats:ls,defaultWidth:"full"}),dateTime:he({formats:is,defaultWidth:"full"})},ds={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},cs=t=>ds[t],xs={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},ms={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},us={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},hs={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},gs={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},fs={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},ps=t=>String(t),bs={ordinalNumber:ps,era:B({values:xs,defaultWidth:"wide"}),quarter:B({values:ms,defaultWidth:"wide",argumentCallback:t=>t-1}),month:B({values:us,defaultWidth:"wide"}),day:B({values:hs,defaultWidth:"wide"}),dayPeriod:B({values:gs,defaultWidth:"wide",formattingValues:fs,defaultFormattingWidth:"wide"})},ys=/^(\d+)(th|st|nd|rd)?/i,Ns=/\d+/i,ws={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},vs={any:[/قبل/,/بعد/]},js={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},ks={any:[/1/i,/2/i,/3/i,/4/i]},Ds={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},Ts={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},Cs={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},Ms={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},Ss={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},$s={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},Is={ordinalNumber:nt({matchPattern:ys,parsePattern:Ns,valueCallback:t=>parseInt(t,10)}),era:X({matchPatterns:ws,defaultMatchWidth:"wide",parsePatterns:vs,defaultParseWidth:"any"}),quarter:X({matchPatterns:js,defaultMatchWidth:"wide",parsePatterns:ks,defaultParseWidth:"any",valueCallback:t=>t+1}),month:X({matchPatterns:Ds,defaultMatchWidth:"wide",parsePatterns:Ts,defaultParseWidth:"any"}),day:X({matchPatterns:Cs,defaultMatchWidth:"wide",parsePatterns:Ms,defaultParseWidth:"any"}),dayPeriod:X({matchPatterns:Ss,defaultMatchWidth:"any",parsePatterns:$s,defaultParseWidth:"any"})},te={code:"ar",formatDistance:rs,formatLong:os,formatRelative:cs,localize:bs,match:Is,options:{weekStartsOn:6,firstWeekContainsDate:1}},_s=({children:t,sidebar:s,header:r})=>{const{i18n:n}=S(),l=n.dir();return e.jsxs("div",{className:"h-screen bg-dark-900 flex flex-col overflow-hidden",dir:l,children:[e.jsx("div",{className:"flex-none z-20 bg-dark-800 border-b border-white/10 shadow-md",children:r}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("main",{className:"flex-1 overflow-y-auto bg-dark-900 relative scrollbar-thin scrollbar-thumb-dark-700 scrollbar-track-transparent",children:e.jsx("div",{className:"min-h-full p-4 lg:p-6",children:t})}),e.jsx("aside",{className:"w-80 flex-none bg-dark-800 border-l border-white/10 hidden lg:flex flex-col h-full z-10 shadow-[-4px_0_15px_-3px_rgba(0,0,0,0.3)]",children:s})]})]})},As=({activeView:t,setActiveView:s,searchQuery:r,setSearchQuery:n,statusFilter:l,setStatusFilter:i,dateFilter:d,setDateFilter:c,onRefresh:y,onLogout:x,onNewAppointment:o,stats:m})=>{const{t:f}=S("admin");return e.jsxs("div",{className:"flex flex-col bg-dark-800 border-b border-white/10",children:[m.pending>0&&e.jsxs("div",{className:"bg-yellow-500/10 border-b border-yellow-500/20 px-6 py-2.5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-yellow-500 rounded-full animate-pulse",children:e.jsx("span",{className:"text-dark-900 font-bold text-sm",children:m.pending})}),e.jsx("span",{className:"text-yellow-400 font-medium text-sm",children:m.pending===1?f("notifications.pendingOne"):f("notifications.pendingMultiple",{count:m.pending})})]}),e.jsx("button",{onClick:()=>{i("pending"),c(""),s("appointments")},className:"text-xs font-bold text-yellow-400 hover:text-yellow-300 bg-yellow-500/20 hover:bg-yellow-500/30 px-3 py-1.5 rounded-lg transition-colors",children:f("notifications.viewPending")})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-tight",children:f("title")}),e.jsxs("div",{className:"flex bg-dark-900/50 rounded-lg p-1 border border-white/5",children:[e.jsxs("button",{onClick:()=>s("today"),className:`px-6 py-3 rounded-md text-sm font-bold uppercase tracking-wider transition-all flex items-center gap-2 relative ${t==="today"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(ht,{className:"h-5 w-5"}),f("views.today"),m.pending>0&&t!=="today"&&e.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center min-w-5 h-5 bg-yellow-500 text-dark-900 text-xs font-bold rounded-full px-1.5 animate-pulse shadow-lg",children:m.pending})]}),e.jsxs("button",{onClick:()=>s("appointments"),className:`px-6 py-3 rounded-md text-sm font-bold uppercase tracking-wider transition-all flex items-center gap-2 ${t==="appointments"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(De,{className:"h-5 w-5"}),f("views.all")]}),e.jsxs("button",{onClick:()=>s("availability"),className:`px-6 py-3 rounded-md text-sm font-bold uppercase tracking-wider transition-all flex items-center gap-2 ${t==="availability"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ot,{className:"h-5 w-5"}),f("views.availability")]}),e.jsxs("button",{onClick:()=>s("services"),className:`px-6 py-3 rounded-md text-sm font-bold uppercase tracking-wider transition-all flex items-center gap-2 ${t==="services"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(je,{className:"h-5 w-5"}),f("views.services")]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(at,{}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gold-500 hover:bg-gold-400 text-dark-900 rounded-lg text-sm font-bold transition-all shadow-lg hover:shadow-gold-500/20",children:[e.jsx(Ve,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:f("actions.add")})]}),e.jsx("div",{className:"h-8 w-px bg-white/10 mx-2"}),e.jsx("button",{onClick:y,className:"p-2.5 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",title:f("actions.refresh"),children:e.jsx(_t,{className:"h-5 w-5"})}),e.jsx("button",{onClick:x,className:"p-2.5 hover:bg-red-500/10 rounded-lg transition-colors text-red-500/70 hover:text-red-500",title:f("actions.logout"),children:e.jsx(Ct,{className:"h-5 w-5"})})]})]}),t==="appointments"&&e.jsxs("div",{className:"flex items-center gap-4 px-6 py-3 bg-dark-900/30",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx(Ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"}),e.jsx("input",{type:"text",placeholder:f("filters.search"),value:r,onChange:u=>n(u.target.value),className:"w-full bg-dark-900 border border-white/10 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-600 focus:border-gold-500/50 focus:ring-1 focus:ring-gold-500/50 outline-none transition-colors h-10 rtl:pl-4 rtl:pr-10"})]}),e.jsxs("div",{className:"relative w-48",children:[e.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"}),e.jsxs("select",{value:l,onChange:u=>i(u.target.value),className:"w-full bg-dark-900 border border-white/10 rounded-lg pl-10 pr-3 py-2 text-sm text-white focus:border-gold-500/50 focus:ring-1 focus:ring-gold-500/50 outline-none cursor-pointer hover:border-white/20 transition-colors h-10 appearance-none rtl:pl-3 rtl:pr-10",children:[e.jsx("option",{value:"all",children:f("filters.allStatuses")}),e.jsx("option",{value:"pending",children:f("filters.pending")}),e.jsx("option",{value:"confirmed",children:f("filters.confirmed")}),e.jsx("option",{value:"cancelled",children:f("filters.cancelled")})]})]}),e.jsxs("div",{className:"relative w-48",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"}),e.jsx("input",{type:"date",value:d,onChange:u=>c(u.target.value),className:"w-full bg-dark-900 border border-white/10 rounded-lg pl-10 pr-3 py-2 text-sm text-white focus:border-gold-500/50 focus:ring-1 focus:ring-gold-500/50 outline-none cursor-pointer hover:border-white/20 transition-colors h-10 rtl:pl-3 rtl:pr-10"})]}),(d||l!=="all")&&e.jsx("button",{onClick:()=>{c(""),i("all")},className:"px-4 py-2 bg-dark-800 hover:bg-dark-700 border border-white/10 rounded-lg text-xs font-bold text-gray-400 hover:text-white transition-colors h-10 uppercase tracking-wide",children:f("actions.reset")}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-4 px-4 border-l border-white/5 pl-6 rtl:border-l-0 rtl:border-r rtl:pl-0 rtl:pr-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wider font-bold",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-gray-400",children:[f("stats.pending"),":"]}),e.jsx("span",{className:"text-white text-sm",children:m.pending})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wider font-bold",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-gray-400",children:[f("stats.confirmed"),":"]}),e.jsx("span",{className:"text-white text-sm",children:m.confirmed})]})]})]})]})},Ge=({appointment:t,serviceNames:s,onStatusUpdate:r,onViewDetails:n,variant:l="grid"})=>{const{t:i,i18n:d}=S("admin"),c=d.language==="ar"?te:ee,y=h=>{switch(h){case"phone":return e.jsx(Q,{className:"h-3.5 w-3.5 text-blue-400"});case"whatsapp":return e.jsx(J,{className:"h-3.5 w-3.5 text-green-400"});case"walk-in":return e.jsx(Te,{className:"h-3.5 w-3.5 text-purple-400"});default:return e.jsx(ke,{className:"h-3.5 w-3.5 text-gray-400"})}},x=h=>{switch(h){case"phone":return i("source.phone");case"whatsapp":return i("source.whatsapp");case"walk-in":return i("source.walkIn");default:return i("source.web")}},o=h=>{switch(h){case"confirmed":return"bg-green-500/10 text-green-400 border-green-500/30";case"cancelled":return"bg-red-500/10 text-red-400 border-red-500/30";default:return"bg-yellow-500/10 text-yellow-500 border-yellow-500/30"}},m=h=>i(`status.${h}`),f=t.status==="pending",u=t.status==="cancelled",j=K(`${t.appointmentDate}T${t.appointmentTime}`),v=Be(j);return l==="list"?e.jsxs("div",{className:`group flex items-center gap-4 p-4 bg-dark-800 border rounded-lg transition-all hover:border-gold-500/50 ${u?"opacity-60 grayscale":v&&!u?"opacity-75":""} ${f?"border-yellow-500/30 shadow-[0_0_10px_-5px_rgba(234,179,8,0.2)]":"border-white/10"}`,children:[e.jsxs("div",{className:"flex flex-col min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-lg font-bold text-white font-mono",children:t.appointmentTime}),t.totalDuration&&e.jsxs("span",{className:"text-xs text-gray-500 bg-dark-700 px-1.5 py-0.5 rounded",children:[t.totalDuration," min"]}),f&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:k(K(t.appointmentDate),"dd MMM",{locale:c})})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-0.5",children:t.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:t.phone})]}),e.jsx("div",{className:"flex-1 min-w-0 text-left rtl:text-right hidden md:block",children:e.jsx("div",{className:"text-xs text-gray-400 line-clamp-1",children:s})}),e.jsx("div",{className:"text-right min-w-[80px] rtl:text-left",children:e.jsxs("div",{className:"text-sm font-bold text-gold-500",children:[t.totalPrice," RON"]})}),e.jsx("div",{className:"min-w-[90px] hidden sm:block",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${o(t.status)}`,children:m(t.status)})}),e.jsx("div",{className:"min-w-[40px] hidden lg:block",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-dark-900/50 rounded-md border border-white/10",title:x(t.source),children:y(t.source)})}),e.jsxs("div",{className:"flex gap-1 min-w-[100px] justify-end rtl:justify-start",children:[e.jsx("button",{onClick:()=>n(t),className:"p-1.5 hover:bg-dark-700 rounded-md text-gray-400 hover:text-white transition-colors",title:i("actions.view"),children:e.jsx(we,{className:"h-4 w-4"})}),f&&!v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(t.id,"confirmed"),className:"p-1.5 hover:bg-green-500/20 rounded-md text-green-400 hover:text-green-300 transition-colors",title:i("actions.confirm"),children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>r(t.id,"cancelled"),className:"p-1.5 hover:bg-red-500/20 rounded-md text-red-400 hover:text-red-300 transition-colors",title:i("actions.cancel"),children:e.jsx(W,{className:"h-4 w-4"})})]})]})]}):e.jsxs("div",{className:`group relative bg-dark-800 border rounded-xl p-4 transition-all hover:border-gold-500/50 hover:shadow-lg hover:shadow-gold-500/10 ${u?"opacity-60 grayscale":v&&!u?"opacity-75":""} ${f?"border-yellow-500/30 shadow-[0_0_15px_-5px_rgba(234,179,8,0.2)]":"border-white/10"}`,children:[f&&e.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-gold-500 to-transparent"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:"text-xl font-bold text-white font-mono",children:t.appointmentTime}),t.totalDuration&&e.jsxs("span",{className:"text-xs text-gray-500 bg-dark-700 px-1.5 py-0.5 rounded",children:[t.totalDuration," min"]}),f&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:k(K(t.appointmentDate),"EEEE, dd MMMM yyyy",{locale:c})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-0.5 truncate",children:t.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:t.phone})]}),e.jsx("div",{className:"text-xs text-gray-400 line-clamp-2",children:s})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between min-w-[120px] rtl:items-start",children:[e.jsx("div",{className:"text-right mb-2 rtl:text-left",children:e.jsxs("div",{className:"text-lg font-bold text-gold-500",children:[t.totalPrice," RON"]})}),e.jsxs("div",{className:"flex flex-col gap-2 items-end mb-2 rtl:items-start",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${o(t.status)}`,children:m(t.status)}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-dark-900/50 rounded-md border border-white/10",children:[y(t.source),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-medium",children:x(t.source)})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>n(t),className:"p-1.5 hover:bg-dark-700 rounded-md text-gray-400 hover:text-white transition-colors",title:i("actions.view"),children:e.jsx(we,{className:"h-4 w-4"})}),f&&!v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(t.id,"confirmed"),className:"p-1.5 hover:bg-green-500/20 rounded-md text-green-400 hover:text-green-300 transition-colors",title:i("actions.confirm"),children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>r(t.id,"cancelled"),className:"p-1.5 hover:bg-red-500/20 rounded-md text-red-400 hover:text-red-300 transition-colors",title:i("actions.cancel"),children:e.jsx(W,{className:"h-4 w-4"})})]})]})]})]}),v&&!u&&e.jsx("div",{className:"absolute top-2 left-2 rtl:left-auto rtl:right-2",children:e.jsx("span",{className:"text-[9px] uppercase tracking-wider font-bold text-gray-600 bg-dark-900/80 px-1.5 py-0.5 rounded",children:i("status.past")})})]})},Ys=({appointments:t,services:s,loading:r,currentPage:n,totalPages:l,totalItems:i,onPageChange:d,onStatusUpdate:c,onViewDetails:y})=>{const{t:x}=S("admin"),{t:o}=S("common"),[m,f]=g.useState("grid"),u=h=>{if(h.nameKey){const b=o(`services_data.${h.nameKey}.name`,{defaultValue:""});if(b&&b!==`services_data.${h.nameKey}.name`)return b}return h.name},j=h=>h.map(b=>{const w=s.find(_=>_.id===b);return w?u(w):null}).filter(Boolean).join(", "),v=()=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-dark-800/50 rounded-lg border border-white/5",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:[x("pagination.page")," ",e.jsx("span",{className:"font-bold text-white",children:n})," ",x("pagination.of")," ",e.jsx("span",{className:"font-bold text-white",children:l}),e.jsxs("span",{className:"hidden sm:inline ml-2 rtl:ml-0 rtl:mr-2",children:["• ",e.jsx("span",{className:"font-medium text-white",children:i})," ",x("pagination.appointments")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>d(n-1),disabled:n===1,className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-dark-700 hover:bg-dark-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-gray-400 hover:text-white text-xs font-medium",children:[e.jsx(ze,{className:"h-3.5 w-3.5 rtl:rotate-180"}),e.jsx("span",{className:"hidden sm:inline",children:x("actions.previous")})]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,l)},(h,b)=>{let w=b+1;return l>5&&n>3&&(w=n-2+b),w>l?null:e.jsx("button",{onClick:()=>d(w),className:`w-8 h-8 rounded-lg text-xs font-bold transition-all ${n===w?"bg-gold-500 text-dark-900 shadow-lg shadow-gold-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600 hover:text-white"}`,children:w},w)})}),e.jsxs("button",{onClick:()=>d(n+1),disabled:n===l,className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-dark-700 hover:bg-dark-600 disabled:opacity-30 disabled:cursor-not-allowed transition-colors text-gray-400 hover:text-white text-xs font-medium",children:[e.jsx("span",{className:"hidden sm:inline",children:x("actions.next")}),e.jsx(Oe,{className:"h-3.5 w-3.5 rtl:rotate-180"})]})]})]});return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex bg-dark-800 p-1 rounded-lg border border-white/10",children:[e.jsxs("button",{onClick:()=>f("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all text-sm font-medium ${m==="grid"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{children:x("views.grid")})]}),e.jsxs("button",{onClick:()=>f("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all text-sm font-medium ${m==="list"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:x("views.list")})]})]}),e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:v()})]}),e.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin scrollbar-thumb-dark-600",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gold-500"})}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:x("messages.noAppointments")}),e.jsx("div",{className:"text-gray-600 text-xs",children:x("messages.tryAdjust")})]})}):e.jsx("div",{className:m==="grid"?"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 pb-4":"flex flex-col gap-3 pb-4",children:t.map(h=>e.jsx(Ge,{appointment:h,serviceNames:j(h.services),onStatusUpdate:c,onViewDetails:y,variant:m},h.id))})}),!r&&t.length>0&&e.jsx("div",{className:"mt-4",children:v()})]})},Ps=({appointments:t,services:s,loading:r,selectedDate:n,onDateChange:l,onStatusUpdate:i,onViewDetails:d})=>{const{t:c,i18n:y}=S("admin"),{t:x}=S("common"),o=y.language==="ar"?te:ee,[m,f]=g.useState("list"),u=a=>{if(a.nameKey){const p=x(`services_data.${a.nameKey}.name`,{defaultValue:""});if(p&&p!==`services_data.${a.nameKey}.name`)return p}return a.name},j=a=>a.map(p=>{const T=s.find(E=>E.id===p);return T?u(T):null}).filter(Boolean).join(", "),v=a=>{switch(a){case"phone":return e.jsx(Q,{className:"h-3.5 w-3.5 text-blue-400"});case"whatsapp":return e.jsx(J,{className:"h-3.5 w-3.5 text-green-400"});case"walk-in":return e.jsx(Te,{className:"h-3.5 w-3.5 text-purple-400"});default:return e.jsx(ke,{className:"h-3.5 w-3.5 text-gray-400"})}},h=a=>{switch(a){case"confirmed":return"bg-green-500/10 text-green-400 border-green-500/30";case"cancelled":return"bg-red-500/10 text-red-400 border-red-500/30";default:return"bg-yellow-500/10 text-yellow-500 border-yellow-500/30"}},b=a=>c(`status.${a}`),w=[...t].sort((a,p)=>a.appointmentTime.localeCompare(p.appointmentTime)),_=w.filter(a=>a.status==="pending"),$=w.filter(a=>a.status==="confirmed"),Y=w.filter(a=>a.status==="cancelled"),M={total:t.length,pending:_.length,confirmed:$.length,cancelled:Y.length,totalRevenue:t.filter(a=>a.status!=="cancelled").reduce((a,p)=>a+p.totalPrice,0)},P=({appointment:a})=>{const p=a.status==="pending",T=a.status==="cancelled",E=K(`${a.appointmentDate}T${a.appointmentTime}`),F=Be(E);return e.jsxs("div",{className:`group flex items-center gap-4 p-4 bg-dark-800 border rounded-lg transition-all hover:border-gold-500/50 ${T?"opacity-60 grayscale":F&&!T?"opacity-75":""} ${p?"border-yellow-500/30 shadow-[0_0_10px_-5px_rgba(234,179,8,0.2)]":"border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[e.jsx(O,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-lg font-bold text-white font-mono",children:a.appointmentTime}),p&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-0.5",children:a.fullName}),e.jsx("div",{className:"text-xs text-gray-400 font-mono",children:a.phone})]}),e.jsx("div",{className:"flex-1 min-w-0 text-left rtl:text-right",children:e.jsx("div",{className:"text-xs text-gray-400 line-clamp-1",children:j(a.services)})}),e.jsx("div",{className:"text-right min-w-[80px] rtl:text-left",children:e.jsxs("div",{className:"text-sm font-bold text-gold-500",children:[a.totalPrice," RON"]})}),e.jsx("div",{className:"min-w-[90px] flex justify-center",children:e.jsx("span",{className:`inline-flex items-center justify-center px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${h(a.status)}`,children:b(a.status)})}),e.jsx("div",{className:"min-w-[80px] flex justify-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1.5 px-2 py-1 bg-dark-900/50 rounded-md border border-white/10",title:a.source,children:v(a.source)})}),e.jsxs("div",{className:"flex gap-1 min-w-[100px] justify-end rtl:justify-start",children:[e.jsx("button",{onClick:()=>d(a),className:"p-1.5 hover:bg-dark-700 rounded-md text-gray-400 hover:text-white transition-colors",title:c("actions.view"),children:e.jsx(we,{className:"h-4 w-4"})}),p&&!F&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(a.id,"confirmed"),className:"p-1.5 hover:bg-green-500/20 rounded-md text-green-400 hover:text-green-300 transition-colors",title:c("actions.confirm"),children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>i(a.id,"cancelled"),className:"p-1.5 hover:bg-red-500/20 rounded-md text-red-400 hover:text-red-300 transition-colors",title:c("actions.cancel"),children:e.jsx(W,{className:"h-4 w-4"})})]})]})]})};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"h-6 w-6 text-gold-500"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:c("todayView.title")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-dark-800 p-1 rounded-lg border border-white/10",children:[e.jsxs("button",{onClick:()=>f("grid"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all text-sm font-medium ${m==="grid"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx("span",{children:c("views.grid")})]}),e.jsxs("button",{onClick:()=>f("list"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all text-sm font-medium ${m==="list"?"bg-gold-500 text-dark-900 shadow-sm":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:c("views.list")})]})]}),e.jsx("button",{onClick:()=>l(k(Et(K(n)),"yyyy-MM-dd")),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors text-gray-400 hover:text-white",title:c("actions.previousDay"),children:e.jsx(ze,{className:"h-5 w-5 rtl:rotate-180"})}),e.jsxs("div",{className:"flex items-center gap-3 bg-dark-800 border border-white/10 rounded-lg px-4 py-2",children:[e.jsx("input",{type:"date",value:n,onChange:a=>l(a.target.value),className:"bg-transparent border-none text-white font-medium text-sm focus:outline-none cursor-pointer"}),e.jsx("div",{className:"text-xs text-gray-400",children:k(K(n),"EEEE",{locale:o})})]}),n!==k(new Date,"yyyy-MM-dd")&&e.jsx("button",{onClick:()=>l(k(new Date,"yyyy-MM-dd")),className:"px-3 py-2 bg-gold-500 hover:bg-gold-400 text-dark-900 rounded-lg text-xs font-bold transition-colors",children:c("actions.today")}),e.jsx("button",{onClick:()=>l(k(We(K(n),1),"yyyy-MM-dd")),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors text-gray-400 hover:text-white",title:c("actions.nextDay"),children:e.jsx(Oe,{className:"h-5 w-5 rtl:rotate-180"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"bg-dark-800 border border-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:c("stats.total")}),e.jsx("div",{className:"text-2xl font-bold text-white",children:M.total})]}),e.jsxs("div",{className:"bg-dark-800 border border-yellow-500/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:c("stats.pending")}),e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:M.pending})]}),e.jsxs("div",{className:"bg-dark-800 border border-green-500/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:c("stats.confirmed")}),e.jsx("div",{className:"text-2xl font-bold text-green-500",children:M.confirmed})]}),e.jsxs("div",{className:"bg-dark-800 border border-red-500/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:c("stats.cancelled")}),e.jsx("div",{className:"text-2xl font-bold text-red-500",children:M.cancelled})]}),e.jsxs("div",{className:"bg-dark-800 border border-gold-500/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:c("stats.estimatedRevenue")}),e.jsxs("div",{className:"text-2xl font-bold text-gold-500",children:[M.totalRevenue," RON"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin scrollbar-thumb-dark-600",children:r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gold-500"})}):t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:c("todayView.noAppointments")}),e.jsx("div",{className:"text-gray-600 text-xs",children:c("todayView.freeDay")})]})}):m==="grid"?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 pb-4",children:w.map(a=>e.jsx(Ge,{appointment:a,serviceNames:j(a.services),onStatusUpdate:i,onViewDetails:d,variant:"grid"},a.id))}):e.jsxs("div",{className:"space-y-6",children:[_.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"h-px flex-1 bg-yellow-500/20"}),e.jsxs("h3",{className:"text-xs uppercase tracking-wider font-bold text-yellow-500",children:[c("todayView.inProgress")," (",_.length,")"]}),e.jsx("div",{className:"h-px flex-1 bg-yellow-500/20"})]}),e.jsx("div",{className:"space-y-2",children:_.map(a=>e.jsx(P,{appointment:a},a.id))})]}),$.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"h-px flex-1 bg-green-500/20"}),e.jsxs("h3",{className:"text-xs uppercase tracking-wider font-bold text-green-500",children:[c("todayView.confirmedSection")," (",$.length,")"]}),e.jsx("div",{className:"h-px flex-1 bg-green-500/20"})]}),e.jsx("div",{className:"space-y-2",children:$.map(a=>e.jsx(P,{appointment:a},a.id))})]}),Y.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"h-px flex-1 bg-red-500/20"}),e.jsxs("h3",{className:"text-xs uppercase tracking-wider font-bold text-red-500",children:[c("todayView.cancelledSection")," (",Y.length,")"]}),e.jsx("div",{className:"h-px flex-1 bg-red-500/20"})]}),e.jsx("div",{className:"space-y-2",children:Y.map(a=>e.jsx(P,{appointment:a},a.id))})]})]})})]})},Fs=({tasks:t,services:s,selectedDate:r,onDateChange:n,onUpdateStatus:l,onViewDetails:i})=>{const{t:d}=S("admin"),{t:c}=S("common"),y=o=>{if(o.nameKey){const m=c(`services_data.${o.nameKey}.name`,{defaultValue:""});if(m&&m!==`services_data.${o.nameKey}.name`)return m}return o.name},x=o=>o.map(m=>{const f=s.find(u=>u.id===m);return f?y(f):null}).filter(Boolean).join(", ");return e.jsxs("div",{className:"h-full flex flex-col bg-dark-800 border-l border-white/10 rtl:border-l-0 rtl:border-r",children:[e.jsxs("div",{className:"p-3 border-b border-white/10",children:[e.jsx("h3",{className:"text-sm font-bold text-white mb-2",children:d("sidebar.title")}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500 rtl:left-auto rtl:right-2"}),e.jsx("input",{type:"date",value:r,onChange:o=>n(o.target.value),className:"w-full bg-dark-900 border border-white/10 rounded pl-8 pr-2 py-1.5 text-xs text-white focus:border-gold-500/50 focus:ring-1 focus:ring-gold-500/50 outline-none cursor-pointer hover:border-white/20 transition-colors rtl:pl-2 rtl:pr-8"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 scrollbar-thin scrollbar-thumb-dark-600",children:t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 text-[10px]",children:d("sidebar.noTasks")}):t.map(o=>e.jsxs("div",{className:`bg-dark-900 border rounded-md p-2 transition-all hover:border-gold-500/30 group ${o.status==="pending"?"border-yellow-500/30 shadow-[0_0_10px_-5px_rgba(234,179,8,0.2)]":o.status==="confirmed"?"border-green-500/20":"border-white/5 opacity-60"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"bg-dark-800 px-1 py-0.5 rounded text-[10px] font-bold text-white font-mono border border-white/10",children:o.appointmentTime}),o.status==="pending"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500 animate-pulse"})]}),e.jsxs("span",{className:"text-gold-500 text-[10px] font-bold",children:[o.totalPrice," RON"]})]}),e.jsxs("div",{className:"mb-1.5",children:[e.jsx("div",{className:"font-bold text-white text-xs truncate",children:o.fullName}),e.jsx("div",{className:"text-[10px] text-gray-500 truncate",children:x(o.services)})]}),e.jsxs("div",{className:"flex gap-1.5 mt-1.5 pt-1.5 border-t border-white/5",children:[e.jsx("button",{onClick:()=>i(o),className:"flex-1 py-0.5 bg-dark-800 hover:bg-dark-700 text-gray-400 hover:text-white text-[10px] font-medium rounded transition-colors",children:d("sidebar.details")}),o.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(o.id,"confirmed"),className:"flex-1 py-0.5 bg-green-500/10 hover:bg-green-500/20 text-green-400 text-[10px] font-medium rounded transition-colors",children:d("actions.confirm")}),e.jsx("button",{onClick:()=>l(o.id,"cancelled"),className:"p-0.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded transition-colors",title:d("actions.cancel"),children:e.jsx(W,{className:"h-3 w-3"})})]})]})]},o.id))})]})};function Hs(t,s){const r=Us(s);return"formatToParts"in r?Os(r,t):Ws(r,t)}const Ls={year:0,month:1,day:2,hour:3,minute:4,second:5};function Os(t,s){try{const r=t.formatToParts(s),n=[];for(let l=0;l<r.length;l++){const i=Ls[r[l].type];i!==void 0&&(n[i]=parseInt(r[l].value,10))}return n}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function Ws(t,s){const r=t.format(s),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const fe={},Se=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Es=Se==="06/25/2014, 00:00:00"||Se==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function Us(t){return fe[t]||(fe[t]=Es?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),fe[t]}function Qe(t,s,r,n,l,i,d){const c=new Date(0);return c.setUTCFullYear(t,s,r),c.setUTCHours(n,l,i,d),c}const $e=36e5,zs=6e4,pe={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Je(t,s,r){if(!t)return 0;let n=pe.timezoneZ.exec(t);if(n)return 0;let l,i;if(n=pe.timezoneHH.exec(t),n)return l=parseInt(n[1],10),Ie(l)?-(l*$e):NaN;if(n=pe.timezoneHHMM.exec(t),n){l=parseInt(n[2],10);const d=parseInt(n[3],10);return Ie(l,d)?(i=Math.abs(l)*$e+d*zs,n[1]==="+"?-i:i):NaN}if(Zs(t)){s=new Date(s||Date.now());const d=r?s:Ks(s),c=ve(d,t);return-(r?c:Rs(s,c,t))}return NaN}function Ks(t){return Qe(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function ve(t,s){const r=Hs(t,s),n=Qe(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let l=t.getTime();const i=l%1e3;return l-=i>=0?i:1e3+i,n-l}function Rs(t,s,r){let l=t.getTime()-s;const i=ve(new Date(l),r);if(s===i)return s;l-=i-s;const d=ve(new Date(l),r);return i===d?i:Math.max(i,d)}function Ie(t,s){return-23<=t&&t<=23&&(s==null||0<=s&&s<=59)}const _e={};function Zs(t){if(_e[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),_e[t]=!0,!0}catch{return!1}}function Ae(t){const s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+t-+s}const Vs=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,be=36e5,Ye=6e4,qs=2,I={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Vs};function Bs(t,s={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);const r=s.additionalDigits==null?qs:Number(s.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(Object.prototype.toString.call(t)!=="[object String]")return new Date(NaN);const n=Xs(t),{year:l,restDateString:i}=Gs(n.date,r),d=Qs(i,l);if(d===null||isNaN(d.getTime()))return new Date(NaN);if(d){const c=d.getTime();let y=0,x;if(n.time&&(y=Js(n.time),y===null||isNaN(y)))return new Date(NaN);if(n.timeZone||s.timeZone){if(x=Je(n.timeZone||s.timeZone,new Date(c+y)),isNaN(x))return new Date(NaN)}else x=Ae(new Date(c+y)),x=Ae(new Date(c+y+x));return new Date(c+y+x)}else return new Date(NaN)}function Xs(t){const s={};let r=I.dateTimePattern.exec(t),n;if(r?(s.date=r[1],n=r[3]):(r=I.datePattern.exec(t),r?(s.date=r[1],n=r[2]):(s.date=null,n=t)),n){const l=I.timeZone.exec(n);l?(s.time=n.replace(l[1],""),s.timeZone=l[1].trim()):s.time=n}return s}function Gs(t,s){if(t){const r=I.YYY[s],n=I.YYYYY[s];let l=I.YYYY.exec(t)||n.exec(t);if(l){const i=l[1];return{year:parseInt(i,10),restDateString:t.slice(i.length)}}if(l=I.YY.exec(t)||r.exec(t),l){const i=l[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}}return{year:null}}function Qs(t,s){if(s===null)return null;let r,n,l;if(!t||!t.length)return r=new Date(0),r.setUTCFullYear(s),r;let i=I.MM.exec(t);if(i)return r=new Date(0),n=parseInt(i[1],10)-1,Fe(s,n)?(r.setUTCFullYear(s,n),r):new Date(NaN);if(i=I.DDD.exec(t),i){r=new Date(0);const d=parseInt(i[1],10);return sa(s,d)?(r.setUTCFullYear(s,0,d),r):new Date(NaN)}if(i=I.MMDD.exec(t),i){r=new Date(0),n=parseInt(i[1],10)-1;const d=parseInt(i[2],10);return Fe(s,n,d)?(r.setUTCFullYear(s,n,d),r):new Date(NaN)}if(i=I.Www.exec(t),i)return l=parseInt(i[1],10)-1,He(l)?Pe(s,l):new Date(NaN);if(i=I.WwwD.exec(t),i){l=parseInt(i[1],10)-1;const d=parseInt(i[2],10)-1;return He(l,d)?Pe(s,l,d):new Date(NaN)}return null}function Js(t){let s,r,n=I.HH.exec(t);if(n)return s=parseFloat(n[1].replace(",",".")),ye(s)?s%24*be:NaN;if(n=I.HHMM.exec(t),n)return s=parseInt(n[1],10),r=parseFloat(n[2].replace(",",".")),ye(s,r)?s%24*be+r*Ye:NaN;if(n=I.HHMMSS.exec(t),n){s=parseInt(n[1],10),r=parseInt(n[2],10);const l=parseFloat(n[3].replace(",","."));return ye(s,r,l)?s%24*be+r*Ye+l*1e3:NaN}return null}function Pe(t,s,r){s=s||0,r=r||0;const n=new Date(0);n.setUTCFullYear(t,0,4);const l=n.getUTCDay()||7,i=s*7+r+1-l;return n.setUTCDate(n.getUTCDate()+i),n}const ea=[31,28,31,30,31,30,31,31,30,31,30,31],ta=[31,29,31,30,31,30,31,31,30,31,30,31];function et(t){return t%400===0||t%4===0&&t%100!==0}function Fe(t,s,r){if(s<0||s>11)return!1;if(r!=null){if(r<1)return!1;const n=et(t);if(n&&r>ta[s]||!n&&r>ea[s])return!1}return!0}function sa(t,s){if(s<1)return!1;const r=et(t);return!(r&&s>366||!r&&s>365)}function He(t,s){return!(t<0||t>52||s!=null&&(s<0||s>6))}function ye(t,s,r){return!(t<0||t>=25||s!=null&&(s<0||s>=60)||r!=null&&(r<0||r>=60))}function aa(t,s,r){t=Bs(t,r);const n=Je(s,t,!0),l=new Date(t.getTime()-n),i=new Date(0);return i.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),i.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),i}const ra=()=>{const{t,i18n:s}=S("admin"),r=s.language==="ar"?te:ee,[n,l]=g.useState(new Date),[i,d]=g.useState({startTime:"10:00",endTime:"20:00",slotDuration:60,isClosed:!1}),[c,y]=g.useState(!1),[x,o]=g.useState(null),[m,f]=g.useState({openTime:"10:00",closeTime:"20:00",slotDuration:60,defaultClosedDays:[0]});g.useEffect(()=>{(async()=>{try{const b=await D.get("/config");f({openTime:b.data.openTime,closeTime:b.data.closeTime,slotDuration:b.data.slotDuration,defaultClosedDays:b.data.defaultClosedDays||[0]}),d(w=>({...w,startTime:b.data.openTime,endTime:b.data.closeTime,slotDuration:b.data.slotDuration}))}catch(b){console.error("Failed to fetch salon config:",b)}})()},[]),g.useEffect(()=>{n&&u()},[n]);const u=async()=>{try{const h=k(n,"yyyy-MM-dd"),b=await D.get(`/availability/${h}`);d(b.data)}catch(h){console.error("Failed to fetch availability:",h)}},j=async()=>{y(!0),o(null);try{const h=k(n,"yyyy-MM-dd");await D.post("/availability",{date:h,...i}),o({type:"success",text:t("availability.saveSuccess")}),setTimeout(()=>o(null),3e3)}catch{o({type:"error",text:t("availability.saveError")})}finally{y(!1)}},v=async()=>{if(confirm(t("availability.resetConfirm"))){y(!0);try{const h=k(n,"yyyy-MM-dd");await D.delete(`/availability/${h}`);const b=m.timeZone||"Europe/Bucharest",_=aa(n,b).getDay(),$=m.defaultClosedDays.includes(_);d({startTime:m.openTime,endTime:m.closeTime,slotDuration:m.slotDuration,isClosed:$}),o({type:"success",text:t("availability.resetSuccess")}),setTimeout(()=>o(null),3e3)}catch{o({type:"error",text:t("availability.resetError")})}finally{y(!1)}}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t("availability.title")}),e.jsx("p",{className:"text-gray-400",children:t("availability.subtitle")})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-dark-700 rounded-2xl p-8 border border-white/10 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-gold-500/10 p-3 rounded-xl",children:e.jsx(R,{className:"h-6 w-6 text-gold-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:t("availability.selectDate")})]}),e.jsx("div",{className:"bg-dark-900/50 p-6 rounded-xl border border-white/5 flex justify-center",children:e.jsx(Ke,{mode:"single",selected:n,onSelect:h=>h&&l(h),locale:r,modifiersClassNames:{selected:"bg-gold-500 text-dark-900 font-bold hover:bg-gold-400",today:"text-gold-500 font-bold"},className:"text-white",dir:s.language==="ar"?"rtl":"ltr"})}),e.jsxs("div",{className:"mt-6 p-4 bg-dark-900/80 rounded-xl border border-white/10 flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-400",children:[t("availability.selectedDate"),":"]}),e.jsx("span",{className:"text-gold-500 font-bold text-lg",children:k(n,"dd MMMM yyyy",{locale:r})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-dark-800 to-dark-700 rounded-2xl p-8 border border-white/10 shadow-xl flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-gold-500/10 p-3 rounded-xl",children:e.jsx(O,{className:"h-6 w-6 text-gold-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:t("availability.configTitle")})]}),e.jsxs("div",{className:"space-y-6 flex-1",children:[e.jsxs("div",{className:`flex items-center justify-between p-5 rounded-xl border transition-all duration-300 ${i.isClosed?"bg-red-500/10 border-red-500/30":"bg-dark-900/50 border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.isClosed?e.jsx(ft,{className:"h-6 w-6 text-red-500"}):e.jsx(Me,{className:"h-6 w-6 text-green-500"}),e.jsxs("div",{children:[e.jsx("span",{className:`font-bold block ${i.isClosed?"text-red-400":"text-white"}`,children:i.isClosed?t("availability.closed"):t("availability.open")}),e.jsx("span",{className:"text-xs text-gray-400",children:i.isClosed?t("availability.closedDesc"):t("availability.openDesc")})]})]}),e.jsx("button",{onClick:()=>d({...i,isClosed:!i.isClosed}),className:`relative w-14 h-7 rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-dark-900 ${i.isClosed?"bg-red-500 focus:ring-red-500":"bg-green-500 focus:ring-green-500"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 ${i.isClosed?"transform translate-x-7":""} rtl:right-1 rtl:left-auto rtl:translate-x-[-1.75rem]`})})]}),!i.isClosed&&e.jsxs("div",{className:"space-y-5 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:t("availability.startTime")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:i.startTime,onChange:h=>d({...i,startTime:h.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-xl p-3 pl-10 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all rtl:pl-3 rtl:pr-10"}),e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:t("availability.endTime")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:i.endTime,onChange:h=>d({...i,endTime:h.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-xl p-3 pl-10 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all rtl:pl-3 rtl:pr-10"}),e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 rtl:left-auto rtl:right-3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-400",children:t("availability.slotDuration")}),e.jsxs("select",{value:i.slotDuration,onChange:h=>d({...i,slotDuration:Number(h.target.value)}),className:"w-full bg-dark-900 border border-white/10 rounded-xl p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all appearance-none cursor-pointer",children:[e.jsxs("option",{value:15,children:["15 ",t("availability.minutes")]}),e.jsxs("option",{value:30,children:["30 ",t("availability.minutes")]}),e.jsxs("option",{value:45,children:["45 ",t("availability.minutes")]}),e.jsxs("option",{value:60,children:["60 ",t("availability.minutes")]})]})]})]}),x&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-3 animate-fade-in ${x.type==="success"?"bg-green-500/10 border border-green-500/20 text-green-400":"bg-red-500/10 border border-red-500/20 text-red-400"}`,children:[x.type==="success"?e.jsx(Me,{className:"h-5 w-5"}):e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:x.text})]}),e.jsxs("div",{className:"flex gap-3 pt-4 mt-auto",children:[e.jsxs("button",{onClick:j,disabled:c,className:"flex-1 flex items-center justify-center gap-2 bg-gold-500 text-dark-900 py-3.5 rounded-xl font-bold hover:bg-gold-400 transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100 shadow-lg shadow-gold-500/20",children:[c?e.jsx("span",{className:"animate-spin",children:"⌛"}):e.jsx(qe,{className:"h-5 w-5"}),t(c?"availability.saving":"availability.saveChanges")]}),e.jsx("button",{onClick:v,disabled:c,className:"px-5 flex items-center justify-center gap-2 bg-dark-800 text-gray-400 border border-white/10 py-3.5 rounded-xl font-medium hover:bg-dark-700 hover:text-white transition-all disabled:opacity-50",title:t("availability.reset"),children:e.jsx(Yt,{className:"h-5 w-5"})})]})]})]})]}),e.jsxs("div",{className:"bg-blue-500/5 border border-blue-500/10 rounded-2xl p-6 flex gap-4 items-start",children:[e.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg shrink-0",children:e.jsx(Ce,{className:"h-6 w-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-400 font-bold mb-2 text-lg",children:t("availability.infoTitle")}),e.jsxs("ul",{className:"text-blue-300/80 space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-500/50"}),t("availability.info1")]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-500/50"}),t("availability.info2")]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-500/50"}),t("availability.info3")]})]})]})]})]})},na=({isOpen:t,onClose:s,onSuccess:r,services:n})=>{const{t:l,i18n:i}=S("admin"),d=i.language==="ar"?te:ee,[c,y]=g.useState(!1),[x,o]=g.useState([]),[m,f]=g.useState(new Date),[u,j]=g.useState(""),[v,h]=g.useState([]),[b,w]=g.useState({fullName:"",phone:"0791125555",email:"",message:"",source:"phone",status:"confirmed"}),[_,$]=g.useState({maxBookingDays:7});g.useEffect(()=>{(async()=>{try{const p=await D.get("/config");$(p.data)}catch(p){console.error("Failed to fetch salon config:",p)}})()},[]),g.useEffect(()=>{t&&(w({fullName:"",phone:"0791125555",email:"",message:"",source:"phone",status:"confirmed"}),o([]),f(new Date),j(""))},[t]),g.useEffect(()=>{if(!m){h([]);return}(async()=>{try{const p=k(m,"yyyy-MM-dd"),T=await D.get(`/availability/${p}`),{startTime:E,endTime:F,slotDuration:se,isClosed:Z,bookedSlots:V}=T.data;if(Z){h([]);return}const ae=[],[ce,re]=E.split(":").map(Number),[xe,U]=F.split(":").map(Number);let H=ce*60+re;const z=xe*60+U,A=new Date,ne=k(m,"yyyy-MM-dd")===k(A,"yyyy-MM-dd"),q=A.getHours()*60+A.getMinutes();for(;H<z;){if(ne&&H<q){H+=se;continue}const me=Math.floor(H/60),ue=H%60,le=`${String(me).padStart(2,"0")}:${String(ue).padStart(2,"0")}`;(!V||!V.includes(le))&&ae.push(le),H+=se}h(ae)}catch(p){console.error("Failed to fetch availability",p),h([])}})()},[m]);const Y=a=>{o(p=>p.includes(a)?p.filter(T=>T!==a):[...p,a])},M=()=>n.filter(a=>x.includes(a.id)).reduce((a,p)=>a+p.price,0),P=async a=>{if(a.preventDefault(),!m||!u||x.length===0){alert(l("modal.fillRequired"));return}y(!0);try{await D.post("/appointments",{...b,appointmentDate:k(m,"yyyy-MM-dd"),appointmentTime:u,services:x,totalPrice:M()}),r(),s()}catch(p){console.error("Booking failed",p),alert(l("modal.createError"))}finally{y(!1)}};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto border border-white/10 shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-800 p-6 border-b border-white/10 flex justify-between items-center z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:l("modal.createTitle")}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(W,{className:"h-6 w-6"})})]}),e.jsx("form",{onSubmit:P,className:"p-6 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"})," ",l("modal.clientDetails")]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:[l("modal.fullName")," *"]}),e.jsx("input",{type:"text",required:!0,value:b.fullName,onChange:a=>w({...b,fullName:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",placeholder:l("modal.fullName")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"})," ",l("modal.phone")]}),e.jsx("input",{type:"tel",value:b.phone,onChange:a=>w({...b,phone:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right rtl:direction-ltr",placeholder:"0791125555"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-1",children:[e.jsx(Re,{className:"h-3 w-3"})," ",l("modal.email")]}),e.jsx("input",{type:"email",value:b.email,onChange:a=>w({...b,email:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",placeholder:l("modal.optional")})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"})," ",l("modal.bookingDetails")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:[l("modal.source")," *"]}),e.jsxs("select",{value:b.source,onChange:a=>w({...b,source:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",children:[e.jsx("option",{value:"phone",children:"Telefon"}),e.jsx("option",{value:"walk_in",children:"Walk-in"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"instagram",children:"Instagram"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"other",children:"Altul"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:[l("modal.status")," *"]}),e.jsxs("select",{value:b.status,onChange:a=>w({...b,status:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rtl:text-right",children:[e.jsx("option",{value:"confirmed",children:l("filters.confirmed")}),e.jsx("option",{value:"pending",children:l("filters.pending")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:l("modal.message")}),e.jsx("textarea",{value:b.message,onChange:a=>w({...b,message:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg p-3 text-white focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none h-20 resize-none rtl:text-right",placeholder:l("modal.internalNotes")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"})," ",l("modal.services")," *"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto pr-2",children:n.map(a=>e.jsxs("div",{onClick:()=>Y(a.id),className:`p-3 rounded-lg border cursor-pointer transition-all flex justify-between items-center ${x.includes(a.id)?"bg-gold-500/10 border-gold-500":"bg-dark-900 border-white/10 hover:border-gold-500/50"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${x.includes(a.id)?"text-gold-500":"text-white"}`,children:a.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[a.duration," min"]})]}),e.jsxs("p",{className:"font-bold text-white",children:[a.price," RON"]})]},a.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-500 flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"})," ",l("modal.dateAndTime")," *"]}),e.jsx("div",{className:"bg-dark-900 p-4 rounded-xl border border-white/10 flex justify-center",children:e.jsx(Ke,{mode:"single",selected:m,onSelect:f,locale:d,disabled:[{before:new Date},{after:new Date(new Date().setDate(new Date().getDate()+_.maxBookingDays))}],modifiersClassNames:{selected:"bg-gold-500 text-dark-900 font-bold hover:bg-gold-400",today:"text-gold-500 font-bold"},className:"text-white",dir:i.language==="ar"?"rtl":"ltr"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-gold-500"})," ",l("modal.availableHours")]}),m?v.length===0?e.jsx("p",{className:"text-red-400 text-sm",children:l("modal.noSlots")}):e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-60 overflow-y-auto pr-2",children:v.map(a=>e.jsx("button",{type:"button",onClick:()=>j(a),className:`p-2 rounded text-sm font-medium transition-colors ${u===a?"bg-gold-500 text-dark-900":"bg-dark-900 text-gray-300 hover:bg-dark-700 border border-white/10"}`,children:a},a))}):e.jsx("p",{className:"text-gray-400 text-sm",children:l("modal.selectDateFirst")})]}),e.jsxs("div",{className:"bg-dark-900 p-4 rounded-xl border border-white/10 mt-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-gray-400",children:[l("modal.total"),":"]}),e.jsxs("span",{className:"text-2xl font-bold text-gold-500",children:[M()," RON"]})]}),e.jsx("button",{type:"submit",disabled:c||!m||!u||x.length===0,className:"w-full bg-gold-500 text-dark-900 py-3 rounded-lg font-bold hover:bg-gold-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?e.jsx(lt,{className:"h-5 w-5 animate-spin"}):l("modal.createButton")})]})]})]})})]})}):null},la=({appointment:t,services:s,onClose:r,onUpdateStatus:n})=>{const{t:l,i18n:i}=S("admin"),{t:d}=S("common"),c=i.language==="ar"?te:ee;if(!t)return null;const y=u=>{if(u.nameKey){const j=d(`services_data.${u.nameKey}.name`,{defaultValue:""});if(j&&j!==`services_data.${u.nameKey}.name`)return j}return u.name},x=u=>u.map(j=>{const v=s.find(h=>h.id===j);return v?y(v):null}).filter(Boolean).join(", "),o=(u="web")=>{switch(u){case"web":return e.jsx(ke,{className:"h-4 w-4 text-blue-400"});case"phone":return e.jsx(Q,{className:"h-4 w-4 text-green-400"});case"whatsapp":return e.jsx(J,{className:"h-4 w-4 text-green-500"});case"walk_in":return e.jsx(ot,{className:"h-4 w-4 text-orange-400"});case"instagram":return e.jsx(Te,{className:"h-4 w-4 text-pink-500"});default:return e.jsx(de,{className:"h-4 w-4 text-gray-400"})}},m=(u="web")=>{switch(u){case"web":return"Website";case"phone":return"Telefon";case"whatsapp":return"WhatsApp";case"walk_in":return"Walk-in";case"instagram":return"Instagram";case"facebook":return"Facebook";default:return u}},f=u=>{switch(u){case"confirmed":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end rtl:justify-start",onClick:r,children:e.jsxs("div",{className:"bg-dark-800 w-full max-w-md h-full overflow-y-auto border-l border-white/10 rtl:border-l-0 rtl:border-r",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-white/10 p-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:l("drawer.title")}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(W,{className:"h-5 w-5 text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2 block",children:l("drawer.status")}),e.jsx("div",{className:"flex gap-2",children:["pending","confirmed","cancelled"].map(u=>e.jsx("button",{onClick:()=>n(t.id,u),className:`flex-1 px-3 py-2 rounded text-xs font-medium border transition-colors ${t.status===u?f(u):"bg-dark-700 text-gray-400 border-white/10 hover:bg-dark-600"}`,children:l(u==="pending"?"filters.pending":u==="confirmed"?"filters.confirmed":"filters.cancelled")},u))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:l("drawer.date")})]}),e.jsx("p",{className:"text-sm font-medium text-white",children:k(new Date(t.appointmentDate),"dd MMM yyyy",{locale:c})})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[e.jsx(O,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:l("drawer.time")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:t.appointmentTime}),t.totalDuration&&e.jsxs("span",{className:"text-xs text-gray-400 bg-dark-600 px-2 py-0.5 rounded",children:[t.totalDuration," min"]})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 space-y-2",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:l("drawer.client")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-gold-500"}),e.jsx("span",{className:"text-sm text-white",children:t.fullName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gold-500"}),e.jsx("a",{href:`tel:${t.phone}`,className:"text-sm text-blue-400 hover:underline dir-ltr",children:t.phone})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-gold-500"}),e.jsx("a",{href:`mailto:${t.email}`,className:"text-sm text-blue-400 hover:underline",children:t.email})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:l("drawer.services")}),e.jsx("p",{className:"text-sm text-white",children:x(t.services)})]}),e.jsx("div",{className:"bg-dark-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:l("drawer.total")})]}),e.jsxs("span",{className:"text-lg font-bold text-gold-500",children:[t.totalPrice," RON"]})]})}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"WhatsApp Actions"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("a",{href:`https://wa.me/${t.phone.replace(/\+/g,"")}?text=${encodeURIComponent(`✅ Programare confirmată!

Bună ${t.fullName},

Programarea ta la Kings Barber este confirmată pentru ${k(new Date(t.appointmentDate),"dd/MM/yyyy")} la ${t.appointmentTime}.

Ne vedem curând!

Cu stimă ✂️
Kings Barber`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-[#25D366] hover:bg-[#128C7E] text-white py-2 px-4 rounded transition-colors text-sm font-medium",onClick:()=>n(t.id,"confirmed"),children:[e.jsx(J,{className:"h-4 w-4"}),"Confirm via WhatsApp"]}),e.jsxs("a",{href:`https://wa.me/${t.phone.replace(/\+/g,"")}?text=${encodeURIComponent(`❌ Programare refuzată!

Bună ${t.fullName},

Din păcate, programarea ta la Kings Barber, programată pentru ${k(new Date(t.appointmentDate),"dd/MM/yyyy")} la ${t.appointmentTime}, nu poate fi confirmată și a fost refuzată.

Te rugăm să alegi o altă dată sau oră care ți se potrivește.

Cu stimă ✂️
Kings Barber`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded transition-colors text-sm font-medium",onClick:()=>n(t.id,"cancelled"),children:[e.jsx(W,{className:"h-4 w-4"}),"Decline via WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:l("drawer.source")}),e.jsxs("div",{className:"flex items-center gap-2",children:[o(t.source),e.jsx("span",{className:"text-sm text-white",children:m(t.source)})]})]}),t.message&&e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:l("drawer.message")}),e.jsx("p",{className:"text-sm text-gray-300",children:t.message})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-white/10",children:[l("drawer.created"),": ",k(new Date(t.createdAt),"dd MMM yyyy, HH:mm",{locale:c})]})]})]})})},Le=[{value:"scissors",label:"Scissors",Icon:je},{value:"sparkles",label:"Sparkles",Icon:dt},{value:"hand",label:"Hand",Icon:ct},{value:"droplet",label:"Droplet",Icon:xt},{value:"user",label:"User",Icon:de},{value:"wand",label:"Wand",Icon:mt}],ia=()=>{const{t}=S("admin"),{t:s}=S("common"),[r,n]=g.useState([]),[l,i]=g.useState(!0),[d,c]=g.useState(null),[y,x]=g.useState(!1),[o,m]=g.useState({name:"",nameKey:"",price:0,duration:30,description:"",descriptionKey:"",icon:"scissors",isActive:!0,sortOrder:0}),[f,u]=g.useState(null),j=async()=>{try{i(!0);const a=await D.get("/services/all");n(a.data)}catch(a){console.error("Failed to fetch services:",a)}finally{i(!1)}};g.useEffect(()=>{j()},[]);const v=(a,p)=>{u({type:a,text:p}),setTimeout(()=>u(null),3e3)},h=()=>{x(!0),c(null),m({name:"",nameKey:"",price:0,duration:30,description:"",descriptionKey:"",icon:"scissors",isActive:!0,sortOrder:r.length})},b=a=>{c(a),x(!1),m({name:a.name,nameKey:a.nameKey||"",price:a.price,duration:a.duration,description:a.description||"",descriptionKey:a.descriptionKey||"",icon:a.icon||"scissors",isActive:a.isActive!==!1,sortOrder:a.sortOrder||0})},w=()=>{c(null),x(!1),m({name:"",nameKey:"",price:0,duration:30,description:"",descriptionKey:"",icon:"scissors",isActive:!0,sortOrder:0})},_=async()=>{try{y?(await D.post("/services",o),v("success",t("services.saveSuccess"))):d&&(await D.put(`/services/${d.id}`,o),v("success",t("services.saveSuccess"))),j(),w()}catch(a){console.error("Failed to save service:",a),v("error",t("services.saveError"))}},$=async a=>{if(confirm(t("services.deleteConfirm")))try{await D.delete(`/services/${a}`),v("success",t("services.deleteSuccess")),j()}catch(p){console.error("Failed to delete service:",p),v("error",t("services.deleteError"))}},Y=async a=>{try{await D.put(`/services/${a.id}`,{isActive:!a.isActive}),j()}catch(p){console.error("Failed to toggle active:",p)}},M=a=>{const p=Le.find(T=>T.value===a);return p?p.Icon:je},P=a=>{if(a.nameKey){const p=s(`services_data.${a.nameKey}.name`,{defaultValue:""});if(p&&p!==`services_data.${a.nameKey}.name`)return p}return a.name};return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gold-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:t("services.title")}),e.jsx("p",{className:"text-gray-400 text-sm",children:t("services.subtitle")})]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-gold-500 text-dark-900 px-4 py-2 rounded-lg font-medium hover:bg-gold-400 transition-colors",children:[e.jsx(Ve,{className:"h-5 w-5"}),t("services.addNew")]})]}),f&&e.jsx("div",{className:`p-4 rounded-lg ${f.type==="success"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:f.text}),(y||d)&&e.jsxs("div",{className:"bg-dark-800 border border-white/10 rounded-xl p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:t(y?"services.addNew":"services.editService")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:[t("services.name")," *"]}),e.jsx("input",{type:"text",value:o.name,onChange:a=>m({...o,name:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:t("services.nameKey")}),e.jsx("input",{type:"text",value:o.nameKey||"",onChange:a=>m({...o,nameKey:a.target.value}),placeholder:"e.g. tuns, barba",className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:[t("services.price")," *"]}),e.jsx("input",{type:"number",value:o.price,onChange:a=>m({...o,price:parseInt(a.target.value)||0}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none",min:0,required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:[t("services.duration")," *"]}),e.jsx("input",{type:"number",value:o.duration,onChange:a=>m({...o,duration:parseInt(a.target.value)||0}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none",min:5,step:5,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:t("services.icon")}),e.jsx("div",{className:"flex gap-2",children:Le.map(a=>{const p=a.Icon;return e.jsx("button",{type:"button",onClick:()=>m({...o,icon:a.value}),className:`p-2 rounded-lg border transition-colors ${o.icon===a.value?"bg-gold-500 text-dark-900 border-gold-500":"bg-dark-700 text-gray-400 border-white/10 hover:border-gold-500/50"}`,title:t(`services.icons.${a.value}`),children:e.jsx(p,{className:"h-5 w-5"})},a.value)})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"block text-sm text-gray-400",children:t("services.isActive")}),e.jsx("button",{type:"button",onClick:()=>m({...o,isActive:!o.isActive}),className:`w-12 h-6 rounded-full transition-colors ${o.isActive?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transform transition-transform ${o.isActive?"translate-x-6":"translate-x-0.5"}`})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:t("services.description")}),e.jsx("textarea",{value:o.description||"",onChange:a=>m({...o,description:a.target.value}),className:"w-full bg-dark-900 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-gold-500 outline-none h-20 resize-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs("button",{onClick:_,disabled:!o.name||o.price===void 0||o.duration===void 0,className:"flex items-center gap-2 bg-gold-500 text-dark-900 px-4 py-2 rounded-lg font-medium hover:bg-gold-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qe,{className:"h-4 w-4"}),t("services.save")]}),e.jsxs("button",{onClick:w,className:"flex items-center gap-2 bg-dark-700 text-gray-300 px-4 py-2 rounded-lg font-medium hover:bg-dark-600 transition-colors",children:[e.jsx(W,{className:"h-4 w-4"}),t("services.cancel")]})]})]}),r.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:e.jsx("p",{children:t("services.noServices")})}):e.jsx("div",{className:"space-y-3",children:r.map(a=>{const p=M(a.icon),T=P(a);return e.jsxs("div",{className:`bg-dark-800 border rounded-xl p-4 flex items-center gap-4 ${a.isActive?"border-white/10":"border-red-500/30 opacity-60"}`,children:[e.jsx("div",{className:"text-gray-500 cursor-grab",children:e.jsx(jt,{className:"h-5 w-5"})}),e.jsx("div",{className:`p-2 rounded-lg ${a.isActive?"bg-gold-500 text-dark-900":"bg-dark-700 text-gray-400"}`,children:e.jsx(p,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium",children:T}),a.nameKey&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Key: ",a.nameKey]}),a.description&&e.jsx("p",{className:"text-sm text-gray-400 truncate max-w-md",children:a.description})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.duration," min"]})]}),e.jsxs("div",{className:"text-gold-500 font-bold text-lg min-w-[80px] text-right",children:[a.price," RON"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Y(a),className:`px-2 py-1 text-xs rounded ${a.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:a.isActive?t("services.active"):t("services.inactive")}),e.jsx("button",{onClick:()=>b(a),className:"p-2 text-gray-400 hover:text-white hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(St,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(a.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:e.jsx(it,{className:"h-4 w-4"})})]})]},a.id)})})]})},ya=()=>{const{t}=S("admin"),s=st(),[r,n]=g.useState([]),[l,i]=g.useState([]),[d,c]=g.useState([]),[y,x]=g.useState([]),[o,m]=g.useState(!0),[f,u]=g.useState(!1),[j,v]=g.useState(null),[h,b]=g.useState(!1),[w,_]=g.useState("today"),[$,Y]=g.useState(""),[M,P]=g.useState("all"),[a,p]=g.useState(""),[T,E]=g.useState(k(new Date,"yyyy-MM-dd")),[F,se]=g.useState(k(new Date,"yyyy-MM-dd")||"2025-12-06"),[Z,V]=g.useState(1),[ae,ce]=g.useState(1),[re,xe]=g.useState(0),U=g.useCallback(async()=>{try{console.log("Fetching appointments with params:",{currentPage:Z,statusFilter:M,dateFilter:a}),m(!0);const N=new URLSearchParams({page:Z.toString(),limit:"12",...M!=="all"&&{status:M},...a&&{date:a}}),L=await D.get(`/appointments?${N}`);console.log("Appointments response:",L.data),n(L.data.data||[]),ce(L.data.pagination?.totalPages||1),xe(L.data.pagination?.totalItems||0)}catch(N){console.error("Failed to fetch appointments:",N),n([])}finally{m(!1)}},[Z,M,a]),H=g.useCallback(async()=>{try{const N=await D.get("/services");c(N.data)}catch(N){console.error("Failed to fetch services:",N)}},[]),z=g.useCallback(async()=>{try{console.log("Fetching tasks for date:",T);const N=await D.get(`/appointments/tasks?date=${T}`);console.log("Tasks response:",N.data),x(N.data.tasks||[])}catch(N){console.error("Failed to fetch tasks:",N),x([])}},[T]),A=g.useCallback(async()=>{try{console.log("Fetching today appointments for:",F),u(!0);const N=await D.get(`/appointments?date=${F}&limit=100`);console.log("Today appointments response:",N.data),i(N.data.data||[])}catch(N){console.error("Failed to fetch today appointments:",N),i([])}finally{u(!1)}},[F]),ne=g.useCallback(async()=>{try{await D.get("/auth/me"),U(),H(),A()}catch(N){console.error("Auth check failed",N)}},[U,H,A]);g.useEffect(()=>{ne()},[ne]),g.useEffect(()=>{z()},[z]),g.useEffect(()=>{A()},[A]);const q=async(N,L)=>{try{await D.put(`/appointments/${N}/status`,{status:L}),U(),z(),A(),j&&j.id===N&&v({...j,status:L})}catch(tt){console.error("Failed to update status:",tt),alert(t("messages.updateError"))}},me=async()=>{try{await D.post("/auth/logout"),s("/admin/login")}catch(N){console.error("Logout failed",N),s("/admin/login")}},ue=r.filter(N=>$===""||N.fullName.toLowerCase().includes($.toLowerCase())||N.phone.includes($)),le={total:re,pending:r.filter(N=>N.status==="pending").length,confirmed:r.filter(N=>N.status==="confirmed").length};return e.jsxs(_s,{header:e.jsx(As,{activeView:w,setActiveView:_,searchQuery:$,setSearchQuery:Y,statusFilter:M,setStatusFilter:N=>{P(N),V(1)},dateFilter:a,setDateFilter:N=>{p(N),V(1)},onRefresh:()=>{U(),z(),A()},onLogout:me,onNewAppointment:()=>b(!0),stats:le}),sidebar:e.jsx(Fs,{tasks:y,services:d,selectedDate:T,onDateChange:E,onUpdateStatus:q,onViewDetails:v}),children:[w==="availability"?e.jsx(ra,{}):w==="services"?e.jsx(ia,{}):w==="today"?e.jsx(Ps,{appointments:l,services:d,loading:f,selectedDate:F,onDateChange:se,onStatusUpdate:q,onViewDetails:v}):e.jsx(Ys,{appointments:ue,services:d,loading:o,currentPage:Z,totalPages:ae,totalItems:re,onPageChange:V,onStatusUpdate:q,onViewDetails:v}),h&&e.jsx(na,{isOpen:h,onClose:()=>b(!1),onSuccess:()=>{U(),z(),A(),b(!1)},services:d}),j&&e.jsx(la,{appointment:j,services:d,onClose:()=>v(null),onUpdateStatus:q})]})};export{ya as default};
