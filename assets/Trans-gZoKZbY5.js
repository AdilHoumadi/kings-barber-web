import{g as Y,w as H,f as M,h as U,k as G,r as A,i as _,l as w,m as k,I as Q}from"./index-BksZboqm.js";var F,z;function K(){return z||(z=1,F={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),F}var ee=K();const te=Y(ee);var ne=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function B(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(te[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(ne),s=null;(s=i.exec(e))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),t.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var re=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,se=/^\s*$/,ae=Object.create(null);function W(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?(function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""})(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(W,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var ie={parse:function(e,t){t||(t={}),t.components||(t.components=ae);var n,r=[],i=[],s=-1,l=!1;if(e.indexOf("<")!==0){var o=e.indexOf("<");r.push({type:"text",content:o===-1?e:e.substring(0,o)})}return e.replace(re,function(u,p){if(l){if(u!=="</"+n.name+">")return;l=!1}var f,E=u.charAt(1)!=="/",C=u.startsWith("<!--"),d=p+u.length,c=e.charAt(d);if(C){var j=B(u);return s<0?(r.push(j),r):((f=i[s]).children.push(j),r)}if(E&&(s++,(n=B(u)).type==="tag"&&t.components[n.name]&&(n.type="component",l=!0),n.voidElement||l||!c||c==="<"||n.children.push({type:"text",content:e.slice(d,e.indexOf("<",d))}),s===0&&r.push(n),(f=i[s-1])&&f.children.push(n),i[s]=n),(!E||n.voidElement)&&(s>-1&&(n.voidElement||n.name===u.slice(2,-1))&&(s--,n=s===-1?r:i[s]),!l&&c!=="<"&&c)){f=s===-1?r:i[s].children;var y=e.indexOf("<",d),x=e.slice(d,y===-1?void 0:y);se.test(x)&&(x=" "),(y>-1&&s+f.length>=0||x!==" ")&&f.push({type:"text",content:x})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+W("",n)},"")}};const P=(e,t)=>{if(!e)return!1;const n=e.props?.children??e.children;return t?n.length>0:!!n},R=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?L(t):t},le=e=>Array.isArray(e)&&e.every(A.isValidElement),L=e=>Array.isArray(e)?e:[e],oe=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},Z=(e,t,n,r)=>{if(!e)return"";let i="";const s=L(e),l=t?.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,u)=>{if(_(o)){i+=`${o}`;return}if(A.isValidElement(o)){const{props:p,type:f}=o,E=Object.keys(p).length,C=l.indexOf(f)>-1,d=p.children;if(!d&&C&&!E){i+=`<${f}/>`;return}if(!d&&(!C||E)||p.i18nIsDynamicList){i+=`<${u}></${u}>`;return}if(C&&E===1&&_(d)){i+=`<${f}>${d}</${f}>`;return}const c=Z(d,t,n,r);i+=`<${u}>${c}</${u}>`;return}if(o===null){w(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(k(o)){const{format:p,...f}=o,E=Object.keys(f);if(E.length===1){const C=p?`${E[0]}, ${p}`:E[0];i+=`{{${C}}}`;return}w(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}w(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},ce=(e,t=[],n={})=>{if(!e)return e;const r=Object.keys(n),i=[...t,...r];let s="",l=0;for(;l<e.length;)if(e[l]==="<"){let o=!1;const u=e.slice(l).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(u){const p=u[1];(/^\d+$/.test(p)||i.includes(p))&&(o=!0,s+=u[0],l+=u[0].length)}if(!o){const p=e.slice(l).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(p){const f=p[1];(/^\d+$/.test(f)||i.includes(f))&&(o=!0,s+=p[0],l+=p[0].length)}}o||(s+="&lt;",l+=1)}else s+=e[l],l+=1;return s},ue=(e,t,n,r,i,s,l)=>{if(n==="")return[];const o=i.transKeepBasicHtmlNodesFor||[],u=n&&new RegExp(o.map(v=>`<${v}`).join("|")).test(n);if(!e&&!t&&!u&&!l)return[n];const p=t??{},f=v=>{L(v).forEach(m=>{_(m)||(P(m)?f(R(m)):k(m)&&!A.isValidElement(m)&&Object.assign(p,m))})};f(e);const E=ce(n,o,p),C=ie.parse(`<0>${E}</0>`),d={...p,...s},c=(v,N,m)=>{const b=R(v),I=y(b,N.children,m);return le(b)&&I.length===0||v.props?.i18nIsDynamicList?b:I},j=(v,N,m,b,I)=>{v.dummy?(v.children=N,m.push(A.cloneElement(v,{key:b},I?void 0:N))):m.push(...A.Children.map([v],h=>{const a="data-i18n-is-dynamic-list",$={key:b,[a]:void 0};return h&&h.props&&Object.keys(h.props).forEach(V=>{V==="ref"||V==="children"||V==="i18nIsDynamicList"||V===a||($[V]=h.props[V])}),A.cloneElement(h,$,I?null:N)}))},y=(v,N,m)=>{const b=L(v);return L(N).reduce((h,a,$)=>{const V=a.children?.[0]?.content&&r.services.interpolator.interpolate(a.children[0].content,d,r.language);if(a.type==="tag"){let T=b[parseInt(a.name,10)];!T&&t&&(T=t[a.name]),m.length===1&&!T&&(T=m[0][a.name]),T||(T={});const g=Object.keys(a.attrs).length!==0?oe({props:a.attrs},T):T,S=A.isValidElement(g),D=S&&P(a,!0)&&!a.voidElement,J=u&&k(g)&&g.dummy&&!S,X=k(t)&&Object.hasOwnProperty.call(t,a.name);if(_(g)){const O=r.services.interpolator.interpolate(g,d,r.language);h.push(O)}else if(P(g)||D){const O=c(g,a,m);j(g,O,h,$)}else if(J){const O=y(b,a.children,m);j(g,O,h,$)}else if(Number.isNaN(parseFloat(a.name)))if(X){const O=c(g,a,m);j(g,O,h,$,a.voidElement)}else if(i.transSupportBasicHtmlNodes&&o.indexOf(a.name)>-1)if(a.voidElement)h.push(A.createElement(a.name,{key:`${a.name}-${$}`}));else{const O=y(b,a.children,m);h.push(A.createElement(a.name,{key:`${a.name}-${$}`},O))}else if(a.voidElement)h.push(`<${a.name} />`);else{const O=y(b,a.children,m);h.push(`<${a.name}>${O}</${a.name}>`)}else if(k(g)&&!S){const O=a.children[0]?V:null;O&&h.push(O)}else j(g,V,h,$,a.children.length!==1||!V)}else if(a.type==="text"){const T=i.transWrapTextNodes,g=l?i.unescape(r.services.interpolator.interpolate(a.content,d,r.language)):r.services.interpolator.interpolate(a.content,d,r.language);T?h.push(A.createElement(T,{key:`${a.name}-${$}`},g)):h.push(g)}return h},[])},x=y([{dummy:!0,children:e||[]}],C,L(e||[]));return R(x[0])},q=(e,t,n)=>{const r=e.key||t,i=A.cloneElement(e,{key:r});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function s(){return A.createElement(A.Fragment,null,i)}return A.createElement(s,{key:r})},pe=(e,t)=>e.map((n,r)=>q(n,r,t)),fe=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{Object.assign(n,{[r]:q(e[r],r,t)})}),n},me=(e,t,n,r)=>e?Array.isArray(e)?pe(e,t):k(e)?fe(e,t):(H(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,he=e=>!k(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,n)=>t&&Number.isNaN(Number.parseFloat(n)),!0);function de({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:u,ns:p,i18n:f,t:E,shouldUnescape:C,...d}){const c=f||M();if(!c)return H(c,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const j=E||c.t.bind(c)||(D=>D),y={...U(),...c.options?.react};let x=p||j.ns||c.options?.defaultNS;x=_(x)?[x]:x||["translation"];const v=Z(e,y,c,r),N=o||s?.defaultValue||v||y.transEmptyNodeValue||(typeof r=="function"?G(r):r),{hashTransKey:m}=y,b=r||(m?m(v||N):v||N);c.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...c.options.interpolation.defaultVariables}:{...c.options.interpolation.defaultVariables});const I=l||t!==void 0&&!c.options?.interpolation?.alwaysFormat||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},h={...s,context:i||s.context,count:t,...l,...I,defaultValue:N,ns:x};let a=b?j(b,h):N;a===b&&N&&(a=N);const $=me(u,a,c,r);let V=$||e,T=null;he($)&&(T=$,V=e);const g=ue(V,T,a,c,y,h,C),S=n??y.defaultTransParent;return S?A.createElement(S,d,g):g}function ge({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:u,ns:p,i18n:f,t:E,shouldUnescape:C,...d}){const{i18n:c,defaultNS:j}=A.useContext(Q)||{},y=f||c||M(),x=E||y?.t.bind(y);return de({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:u,ns:p||x?.ns||j||y?.options?.defaultNS,i18n:y,t:E,shouldUnescape:C,...d})}export{ge as T};
